import{_ as c,C as d,c as e,o as i,a4 as o,G as n,j as a,w as t,a as r}from"./chunks/framework.CUkLqXm4.js";const m="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124145146176.png",Q="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124151049413.png",T="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124175308429.png",h="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124173356967.png",u="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124185951933.png",g="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250121121717051.png",k="/XIAOHUANG_BLOG/docs/python%E8%AF%AD%E6%B3%95/%E4%BB%A3%E7%A0%81%E8%AF%AD%E6%B3%95_localdata/image-20250124212317436.png",O=JSON.parse('{"title":"文件测试","description":"","frontmatter":{},"headers":[],"relativePath":"xiaohuang_mdwork/语法笔记/Python代码语法.md","filePath":"xiaohuang_mdwork/语法笔记/Python代码语法.md"}'),x={name:"xiaohuang_mdwork/语法笔记/Python代码语法.md"},b={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.934ex",height:"2.565ex",role:"img",focusable:"false",viewBox:"0 -883.9 11021 1133.9","aria-hidden":"true"},y={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"27.071ex",height:"2.565ex",role:"img",focusable:"false",viewBox:"0 -883.9 11965.4 1133.9","aria-hidden":"true"},f={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"14.812ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 6547 1000","aria-hidden":"true"},v={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"38.552ex",height:"6.712ex",role:"img",focusable:"false",viewBox:"0 -1720.9 17040.1 2966.8","aria-hidden":"true"},_={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.594ex"},xmlns:"http://www.w3.org/2000/svg",width:"32.479ex",height:"2.594ex",role:"img",focusable:"false",viewBox:"0 -883.9 14355.7 1146.5","aria-hidden":"true"},w={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.532ex",height:"6.354ex",role:"img",focusable:"false",viewBox:"0 -1562.5 14820.9 2808.5","aria-hidden":"true"},H={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.439ex"},xmlns:"http://www.w3.org/2000/svg",width:"36.509ex",height:"2.009ex",role:"img",focusable:"false",viewBox:"0 -694 16137 888","aria-hidden":"true"},L={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-1.577ex"},xmlns:"http://www.w3.org/2000/svg",width:"24.43ex",height:"4.602ex",role:"img",focusable:"false",viewBox:"0 -1337 10798 2034","aria-hidden":"true"},C={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-2.819ex"},xmlns:"http://www.w3.org/2000/svg",width:"33.532ex",height:"6.354ex",role:"img",focusable:"false",viewBox:"0 -1562.5 14820.9 2808.5","aria-hidden":"true"},E={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.777ex"},xmlns:"http://www.w3.org/2000/svg",width:"35.438ex",height:"2.922ex",role:"img",focusable:"false",viewBox:"0 -948 15663.6 1291.3","aria-hidden":"true"},M={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"35.413ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 15652.6 950","aria-hidden":"true"},V={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.525ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 2000 950","aria-hidden":"true"},q={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"4793.213ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 2118600 950","aria-hidden":"true"},Z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"0.036ex",height:"0.036ex",role:"img",focusable:"false",viewBox:"0 0 16 16","aria-hidden":"true"},D={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"4.525ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 2000 950","aria-hidden":"true"},z={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"703.167ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 310800 950","aria-hidden":"true"},F={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"20.362ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 9000 950","aria-hidden":"true"},X={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"830.769ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 367200 950","aria-hidden":"true"},B={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"2349.774ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 1038600 950","aria-hidden":"true"},A={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.452ex"},xmlns:"http://www.w3.org/2000/svg",width:"33062.443ex",height:"2.149ex",role:"img",focusable:"false",viewBox:"0 -750 14613600 950","aria-hidden":"true"};function P(S,s,N,I,G,j){const l=d("mjx-assistive-mml"),p=d("mjx-container");return i(),e("div",null,[s[42]||(s[42]=o(`<p>[TOC]</p><h1 id="文件测试" tabindex="-1">文件测试 <a class="header-anchor" href="#文件测试" aria-label="Permalink to &quot;文件测试&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>if __name__==&quot;__main__&quot;:</span></span></code></pre></div><h2 id="pip" tabindex="-1">pip <a class="header-anchor" href="#pip" aria-label="Permalink to &quot;pip&quot;">​</a></h2><p>源</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>-i https://pypi.tuna.tsinghua.edu.cn/simple</span></span></code></pre></div><p>回复默认镜像源</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip config unset global.index-url</span></span></code></pre></div><p>包</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip install numpy</span></span></code></pre></div><h2 id="cmd" tabindex="-1">cmd <a class="header-anchor" href="#cmd" aria-label="Permalink to &quot;cmd&quot;">​</a></h2><p>切换路径</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd /d D:\\桌面\\apktest</span></span></code></pre></div><ul><li><code>/d</code> 参数用于切换驱动器（从 <code>C:</code> 切换到 <code>D:</code>）。</li><li><code>D:\\桌面\\apktest</code> 是目标路径</li></ul><h2 id="apk-打包" tabindex="-1">apk 打包 <a class="header-anchor" href="#apk-打包" aria-label="Permalink to &quot;apk 打包&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>cd /d D:\\桌面\\apktest</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>buildozer init</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>buildozer -v android debug</span></span></code></pre></div><h1 id="numpy" tabindex="-1">numpy <a class="header-anchor" href="#numpy" aria-label="Permalink to &quot;numpy&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span></code></pre></div><h2 id="生成" tabindex="-1">生成 <a class="header-anchor" href="#生成" aria-label="Permalink to &quot;生成&quot;">​</a></h2><h3 id="arange-x" tabindex="-1">arange(X) <a class="header-anchor" href="#arange-x" aria-label="Permalink to &quot;arange(X)&quot;">​</a></h3><p>定间隔序列：生成从 0 到 10 等间隔为 0.1 的数据</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span># 生成从0到10，步长为0.1的数据</span></span>
<span class="line"><span>data = np.arange(0, 10.1, 0.1)</span></span>
<span class="line"><span># 打印结果</span></span>
<span class="line"><span>print(data)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[ 0.   0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9  1.   1.1  1.2  1.3</span></span>
<span class="line"><span>  1.4  1.5  1.6  1.7  1.8  1.9  2.   2.1  2.2  2.3  2.4  2.5  2.6  2.7</span></span>
<span class="line"><span>  2.8  2.9  3.   3.1  3.2  3.3  3.4  3.5  3.6  3.7  3.8  3.9  4.   4.1</span></span>
<span class="line"><span>  4.2  4.3  4.4  4.5  4.6  4.7  4.8  4.9  5.   5.1  5.2  5.3  5.4  5.5</span></span>
<span class="line"><span>  5.6  5.7  5.8  5.9  6.   6.1  6.2  6.3  6.4  6.5  6.6  6.7  6.8  6.9</span></span>
<span class="line"><span>  7.   7.1  7.2  7.3  7.4  7.5  7.6  7.7  7.8  7.9  8.   8.1  8.2  8.3</span></span>
<span class="line"><span>  8.4  8.5  8.6  8.7  8.8  8.9  9.   9.1  9.2  9.3  9.4  9.5  9.6  9.7</span></span>
<span class="line"><span>  9.8  9.9 10. ]</span></span></code></pre></div><h3 id="linspace-x-x-x" tabindex="-1">linspace(X,X,X) <a class="header-anchor" href="#linspace-x-x-x" aria-label="Permalink to &quot;linspace(X,X,X)&quot;">​</a></h3><p>等间隔序列</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span># 生成从0到10的100个等间隔的数据</span></span>
<span class="line"><span>data = np.linspace(0, 10, 5)</span></span>
<span class="line"><span># 打印结果</span></span>
<span class="line"><span>print(data)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[ 0.   2.5  5.   7.5 10. ]</span></span></code></pre></div><h3 id="full" tabindex="-1">full() <a class="header-anchor" href="#full" aria-label="Permalink to &quot;full()&quot;">​</a></h3><h3 id="array-x" tabindex="-1">array(X) <a class="header-anchor" href="#array-x" aria-label="Permalink to &quot;array(X)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>np.array(object)</span></span></code></pre></div><ul><li>object：可以是列表、元组、其他 NumPy 数组或类似数组的对象。np.array() 会将这些数据转换为一个 NumPy 数组。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>boxes = [</span></span>
<span class="line"><span>    [100, 200, 150, 250],  # 第一个框</span></span>
<span class="line"><span>    [200, 300, 250, 350],  # 第二个框</span></span>
<span class="line"><span>    [50, 100, 75, 125]     # 第三个框</span></span>
<span class="line"><span>]</span></span>
<span class="line"><span>boxes_array = np.array(boxes)</span></span>
<span class="line"><span>print(boxes_array)</span></span>
<span class="line"><span># 输出:</span></span>
<span class="line"><span># [[100 200 150 250]</span></span>
<span class="line"><span>#  [200 300 250 350]</span></span>
<span class="line"><span>#  [ 50 100  75 125]]</span></span></code></pre></div><p>含 dtype 设置</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>r_array = np.array([</span></span>
<span class="line"><span>    [-1, -1, -1, -1, 0, -1],</span></span>
<span class="line"><span>    [-1, -1, -1, 0, -1, 100],</span></span>
<span class="line"><span>    [-1, -1, -1, 0, -1, -1],</span></span>
<span class="line"><span>    [-1, 0, 0, -1, 0, -1],</span></span>
<span class="line"><span>    [0, -1, -1, 0, -1, 100],</span></span>
<span class="line"><span>    [-1, 0, -1, -1, 0, 100]], dtype=np.float32)</span></span></code></pre></div><h3 id="zeros-x" tabindex="-1">zeros(X) <a class="header-anchor" href="#zeros-x" aria-label="Permalink to &quot;zeros(X)&quot;">​</a></h3><p>用来创建一个由零填充的数组。<code>X</code> 可以是一个整数或者整数元组，用来指定数组的形状。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>np.zeros(shape, dtype=float, order=&#39;C&#39;)</span></span></code></pre></div><ul><li><code>shape</code>：指定数组的形状。可以是一个整数（表示一维数组的大小），也可以是一个元组（表示多维数组的形状）。</li><li><code>dtype</code>：指定数组元素的数据类型。默认是 <code>float</code>。</li><li><code>order</code>：数组在内存中的存储顺序。<code>C</code> 表示按行存储（C-style），<code>F</code> 表示按列存储（Fortran-style）。</li></ul><p>示例</p><p>一维全零数组</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span># 创建一个包含 5 个零的一维数组</span></span>
<span class="line"><span>array1 = np.zeros(5)</span></span>
<span class="line"><span>print(array1)</span></span>
<span class="line"><span># Output: [0. 0. 0. 0. 0.]</span></span></code></pre></div><p>二维全零数组</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span># 创建一个 2x3 的二维数组，元素为零</span></span>
<span class="line"><span>array2 = np.zeros((2, 3))</span></span>
<span class="line"><span>print(array2)</span></span></code></pre></div><h3 id="meshgrid-x-x" tabindex="-1">meshgrid(X,X) <a class="header-anchor" href="#meshgrid-x-x" aria-label="Permalink to &quot;meshgrid(X,X)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>x = np.linspace(-1, 2, 5)  # x 从 -5 到 5，生成 100 个点</span></span>
<span class="line"><span>y = np.linspace(-5, 5, 10)  # y 从 -5 到 5，生成 100 个点</span></span>
<span class="line"><span>x, y = np.meshgrid(x, y)     # 生成二维网格数据</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>x= [[-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]</span></span>
<span class="line"><span> [-1.   -0.25  0.5   1.25  2.  ]]</span></span>
<span class="line"><span>y= [[-5.         -5.         -5.         -5.         -5.        ]</span></span>
<span class="line"><span> [-3.88888889 -3.88888889 -3.88888889 -3.88888889 -3.88888889]</span></span>
<span class="line"><span> [-2.77777778 -2.77777778 -2.77777778 -2.77777778 -2.77777778]</span></span>
<span class="line"><span> [-1.66666667 -1.66666667 -1.66666667 -1.66666667 -1.66666667]</span></span>
<span class="line"><span> [-0.55555556 -0.55555556 -0.55555556 -0.55555556 -0.55555556]</span></span>
<span class="line"><span> [ 0.55555556  0.55555556  0.55555556  0.55555556  0.55555556]</span></span>
<span class="line"><span> [ 1.66666667  1.66666667  1.66666667  1.66666667  1.66666667]</span></span>
<span class="line"><span> [ 2.77777778  2.77777778  2.77777778  2.77777778  2.77777778]</span></span>
<span class="line"><span> [ 3.88888889  3.88888889  3.88888889  3.88888889  3.88888889]</span></span>
<span class="line"><span> [ 5.          5.          5.          5.          5.        ]]</span></span></code></pre></div><h3 id="concatenate-x" tabindex="-1">concatenate(X) <a class="header-anchor" href="#concatenate-x" aria-label="Permalink to &quot;concatenate(X)&quot;">​</a></h3><p>用于将两个或多个数组沿指定轴（axis）连接（拼接）起来的函数。它可以用于一维、二维或多维数组的拼接。</p><ul><li>沿着哪个轴拼，哪个轴就维度就变大</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.concatenate((a1, a2, ...), axis=0, out=None)</span></span></code></pre></div><ul><li><strong><code>a1, a2, ...</code></strong>：要连接的数组，传递一个序列（如列表或元组），其中包含多个数组。这些数组的形状必须在拼接轴上兼容，即除了拼接的轴之外，其他维度的大小必须相同。</li><li><strong><code>axis</code></strong>：指定拼接的轴（默认为 0）。如果为 0，则沿着第一个轴（行方向）拼接；如果为 1，则沿着第二个轴（列方向）拼接。对于更高维的数组，可以指定其他轴。</li><li><strong><code>out</code></strong>：可选参数，指定输出数组。如果没有提供，<code>concatenate</code> 会返回一个新的数组。</li><li><code>axis=-1</code> 代表沿着数组的最后一个轴进行操作</li></ul><p>示例 1</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建两个一维数组</span></span>
<span class="line"><span>arr1 = np.array([1, 2, 3])</span></span>
<span class="line"><span>arr2 = np.array([4, 5, 6])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 沿着 axis=0（默认）拼接</span></span>
<span class="line"><span>result = np.concatenate((arr1, arr2))</span></span>
<span class="line"><span></span></span>
<span class="line"><span>print(result)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[1 2 3 4 5 6]</span></span></code></pre></div><p>示例 2：列变多（二维）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建两个二维数组</span></span>
<span class="line"><span>arr1 = np.array([[1, 2, 3], [4, 5, 6]])</span></span>
<span class="line"><span>arr2 = np.array([[7, 8, 9], [10, 11, 12]])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 沿着 axis=1 拼接（列拼接，列变多）</span></span>
<span class="line"><span>result = np.concatenate((arr1, arr2), axis=1)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>print(result)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[ 1  2  3  7  8  9]</span></span>
<span class="line"><span> [ 4  5  6 10 11 12]]</span></span></code></pre></div><p>示例 3：行变多</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建两个二维数组</span></span>
<span class="line"><span>arr1 = np.array([[1, 2, 3], [4, 5, 6]])</span></span>
<span class="line"><span>arr2 = np.array([[7, 8, 9], [10, 11, 12]])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 沿着 axis=0 拼接（行拼接）</span></span>
<span class="line"><span>result = np.concatenate((arr1, arr2), axis=0)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>print(result)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[ 1  2  3]</span></span>
<span class="line"><span> [ 4  5  6]</span></span>
<span class="line"><span> [ 7  8  9]</span></span>
<span class="line"><span> [10 11 12]]</span></span></code></pre></div><h3 id="random" tabindex="-1">random <a class="header-anchor" href="#random" aria-label="Permalink to &quot;random&quot;">​</a></h3><h4 id="rand-x-x" tabindex="-1">rand(X,X) <a class="header-anchor" href="#rand-x-x" aria-label="Permalink to &quot;rand(X,X)&quot;">​</a></h4><p>生成在 [0, 1) 范围内均匀分布的随机数</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 生成一个 3x3 的二维数组，随机数均匀分布在 [0, 1)</span></span>
<span class="line"><span>random_array = np.random.rand(3, 3)</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[0.53211785 0.37498243 0.05767906]</span></span>
<span class="line"><span> [0.05356777 0.9937622  0.35413349]</span></span>
<span class="line"><span> [0.19451724 0.06929093 0.63572458]]</span></span></code></pre></div><h4 id="uniform-x-x-x" tabindex="-1">uniform(X,X,X) <a class="header-anchor" href="#uniform-x-x-x" aria-label="Permalink to &quot;uniform(X,X,X)&quot;">​</a></h4><p>生成在 <code>[low, high)</code> 范围内的均匀分布的随机数。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.random.uniform(low, high, size)</span></span></code></pre></div><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 生成一个 3x3 的二维数组，随机数均匀分布在 [10, 20) 范围内</span></span>
<span class="line"><span>random_array = np.random.uniform(10, 20, size=(3, 3))</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[16.24967916 14.42991167 13.27096755]</span></span>
<span class="line"><span> [12.83481596 16.82261884 18.46380928]</span></span>
<span class="line"><span> [11.99405017 18.34118886 12.08456046]]</span></span></code></pre></div><h4 id="randn-x-x" tabindex="-1">randn(X,X) <a class="header-anchor" href="#randn-x-x" aria-label="Permalink to &quot;randn(X,X)&quot;">​</a></h4><p>生成标准正态分布（均值 0，标准差 1）的随机数。</p><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 生成一个 3x3 的二维数组，随机数符合标准正态分布</span></span>
<span class="line"><span>random_array = np.random.randn(3, 3)</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[ 0.01206453 -0.56885274  1.09912785]</span></span>
<span class="line"><span> [-0.58104339  0.7795063   0.46722576]</span></span>
<span class="line"><span> [ 0.1194159   1.37870185  1.35873444]]</span></span></code></pre></div><h4 id="normal-x-x-x" tabindex="-1">normal(X,X,X) <a class="header-anchor" href="#normal-x-x-x" aria-label="Permalink to &quot;normal(X,X,X)&quot;">​</a></h4><p>生成均值为 <code>loc</code>、标准差为 <code>scale</code> 的正态分布随机数</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.random.normal(loc, scale, size)</span></span></code></pre></div><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 生成一个 3x3 的二维数组，随机数符合均值为 5，标准差为 2 的正态分布</span></span>
<span class="line"><span>random_array = np.random.normal(loc=5, scale=2, size=(3, 3))</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[ 4.04278939  5.53650695  5.32420281]</span></span>
<span class="line"><span> [ 3.72218741  3.92079686  5.17382603]</span></span>
<span class="line"><span> [ 7.04236052  4.4249029   6.74998278]]</span></span></code></pre></div><h4 id="randint-x-x-x" tabindex="-1">randint(X,X,X) <a class="header-anchor" href="#randint-x-x-x" aria-label="Permalink to &quot;randint(X,X,X)&quot;">​</a></h4><p>生成在 <code>[low, high)</code> 范围内的随机整数。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.random.randint(low, high, size)</span></span></code></pre></div><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 生成一个 3x3 的二维数组，随机整数范围在 [1, 10)</span></span>
<span class="line"><span>random_array = np.random.randint(1, 10, size=(3, 3))</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[4 9 3]</span></span>
<span class="line"><span> [5 8 1]</span></span>
<span class="line"><span> [6 7 3]]</span></span></code></pre></div><h4 id="choice" tabindex="-1">choice <a class="header-anchor" href="#choice" aria-label="Permalink to &quot;choice&quot;">​</a></h4><p>生成一个数组，数组元素从给定的 <code>a</code> 中选择，可以指定概率 <code>p</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.random.choice(a, size, replace, p)</span></span></code></pre></div><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 生成一个 3x3 的布尔数组，随机选择 True 或 False</span></span>
<span class="line"><span>random_array = np.random.choice([True, False], size=(3, 3))</span></span>
<span class="line"><span>print(random_array)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[[False  True False]</span></span>
<span class="line"><span> [ True False  True]</span></span>
<span class="line"><span> [False  True False]]</span></span></code></pre></div><h3 id="split" tabindex="-1">split <a class="header-anchor" href="#split" aria-label="Permalink to &quot;split&quot;">​</a></h3><ul><li>可以实践 n 个一组分割数组，和 1 组 n 个分割数组</li><li>按索引分割</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.split(ary, indices_or_sections, axis=0)</span></span></code></pre></div><ul><li><strong><code>ary</code></strong>：要分割的数组。可以是任意形状的 NumPy 数组。</li><li><code>indices_or_sections</code>： <ul><li>如果是一个整数，表示将数组分割成该数量的子数组。</li><li>如果是一个数组或列表，表示在指定的索引处进行分割（根据索引数组指定的点进行分割）。</li></ul></li><li><strong><code>axis</code></strong>：默认是 <code>0</code>，表示沿着第一个轴（行方向）进行分割。如果将其设置为 <code>1</code>，则表示沿着第二个轴（列方向）分割。</li></ul><p>示例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])</span></span>
<span class="line"><span>#分成5份</span></span>
<span class="line"><span>result1 = np.split(arr, 5)</span></span>
<span class="line"><span>print(result1)</span></span>
<span class="line"><span>#5个1组</span></span>
<span class="line"><span>result2 = np.split(arr, len(arr)//5)</span></span>
<span class="line"><span>print(result2)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[array([1, 2]), array([3, 4]), array([5, 6]), array([7, 8]), array([ 9, 10])]</span></span>
<span class="line"><span>[array([1, 2, 3, 4, 5]), array([ 6,  7,  8,  9, 10])]</span></span></code></pre></div><p>示例 2：</p><p>按索引分割</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>arr = np.array([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])</span></span>
<span class="line"><span>indices = [3, 7]  # 在索引 3 和 7 处进行分割</span></span>
<span class="line"><span>result = np.split(arr, indices)</span></span>
<span class="line"><span>print(result)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[array([1, 2, 3]), array([4, 5, 6, 7]), array([ 8,  9, 10])]</span></span></code></pre></div><h3 id="切片" tabindex="-1">切片 <a class="header-anchor" href="#切片" aria-label="Permalink to &quot;切片&quot;">​</a></h3><h4 id="_0-与-0" tabindex="-1">[0]与 0 <a class="header-anchor" href="#_0-与-0" aria-label="Permalink to &quot;[0]与 0&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>mask_array=np.random.rand(30,20,50)</span></span>
<span class="line"><span>print(mask_array[:,:,[0]].shape)</span></span>
<span class="line"><span>print(mask_array[:, :, 0].shape)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>(30, 20, 1)</span></span>
<span class="line"><span>(30, 20)</span></span></code></pre></div><h2 id="运算" tabindex="-1">运算 <a class="header-anchor" href="#运算" aria-label="Permalink to &quot;运算&quot;">​</a></h2><h3 id="true-divide-x-x" tabindex="-1">true_divide(X,X) <a class="header-anchor" href="#true-divide-x-x" aria-label="Permalink to &quot;true_divide(X,X)&quot;">​</a></h3><p>真除法</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>x = np.array([5, 10, 15])</span></span>
<span class="line"><span>y = np.array([2, 4, 5])</span></span>
<span class="line"><span>result = np.true_divide(x, y)</span></span>
<span class="line"><span>print(result)  # 输出: [2.5 2.5 3. ] (即使输入是整数，结果仍为浮动数)</span></span></code></pre></div><ul><li>除数为零的情况是不会报错，对应项输出 inf</li><li><strong>处理整数除法</strong>：在 Python 3 中，<code>/</code> 运算符默认执行浮点除法。然而，如果两个操作数是整数，<code>//</code> 执行的是整数除法。<code>np.true_divide</code> 确保了无论输入是否为整数，结果始终是浮点数。</li><li><strong>避免溢出</strong>：<code>np.true_divide</code> 能够以浮动精度的方式进行除法，避免了使用普通整数除法时可能会出现的溢出问题。</li></ul><h2 id="比较" tabindex="-1">比较 <a class="header-anchor" href="#比较" aria-label="Permalink to &quot;比较&quot;">​</a></h2><h3 id="min-x" tabindex="-1">min(X) <a class="header-anchor" href="#min-x" aria-label="Permalink to &quot;min(X)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>np.max([1,2,3,4])</span></span></code></pre></div><p>注意[]</p><h3 id="max-x" tabindex="-1">max(X) <a class="header-anchor" href="#max-x" aria-label="Permalink to &quot;max(X)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>np.max([1,2,3,4])</span></span></code></pre></div><p>注意[]</p><h3 id="maximun-x-x" tabindex="-1">maximun(X,X) <a class="header-anchor" href="#maximun-x-x" aria-label="Permalink to &quot;maximun(X,X)&quot;">​</a></h3><p>逐位取大</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>np.maximum(x1, x2)</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>np.maximun(1,5)  #这个可以但是如果是max就会报错，必须加[]</span></span>
<span class="line"><span>np.maximum([1,2,3,4],2)   #np.max([1,2,3,4])</span></span>
<span class="line"><span>#不能超过三个</span></span>
<span class="line"><span>print(np.maximum([1,2,3,4],2))</span></span>
<span class="line"><span>print(np.maximum(2,[1,2,3,4]))</span></span></code></pre></div><h2 id="排序" tabindex="-1">排序 <a class="header-anchor" href="#排序" aria-label="Permalink to &quot;排序&quot;">​</a></h2><h3 id="argsort" tabindex="-1">argsort() <a class="header-anchor" href="#argsort" aria-label="Permalink to &quot;argsort()&quot;">​</a></h3><p><code>argsort()</code> 用于返回数组排序后元素的索引。</p><p><code>argsort()</code> 返回的是原始数组中元素按照排序顺序的索引（而不是排序后的值）。</p><p>X.argsort()</p><p>np.argsort(X)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.argsort(a, axis=-1, kind=&#39;quicksort&#39;, order=None)</span></span></code></pre></div><ul><li><code>a</code>：输入数组，可以是任意形状的数组。</li><li><code>axis</code>：指定沿哪个轴排序，默认为 <code>-1</code>（即最后一个轴）。如果数组是二维的，<code>axis=0</code> 表示按列排序，<code>axis=1</code> 表示按行排序。</li><li><code>kind</code>：指定排序算法，可选值为 <code>&#39;quicksort&#39;</code>, <code>&#39;mergesort&#39;</code>, <code>&#39;heapsort&#39;</code> 或 <code>&#39;stable&#39;</code>。默认值是 <code>&#39;quicksort&#39;</code>。</li><li><code>order</code>：如果输入的是结构化数组，可以通过该参数指定按照某些字段排序。</li><li>按升序排序，要降序则反转</li></ul><p>示例</p><p>升序</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span>arr = np.array([3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5])</span></span>
<span class="line"><span>indices_1 = np.argsort(arr)</span></span>
<span class="line"><span>indices_2 = arr.argsort()</span></span>
<span class="line"><span>print(&quot;原始数组:&quot;, arr)</span></span>
<span class="line"><span>print(&quot;排序后的索引1:&quot;, indices_1)</span></span>
<span class="line"><span>print(&quot;排序后的索引2:&quot;, indices_2)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>原始数组: [3 1 4 1 5 9 2 6 5 3 5]</span></span>
<span class="line"><span>排序后的索引1: [ 1  3  6  0  9  2  8  4 10  7  5]</span></span>
<span class="line"><span>排序后的索引2: [ 1  3  6  0  9  2  8  4 10  7  5]</span></span></code></pre></div><p>降序</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>arr = np.array([3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 降序排序</span></span>
<span class="line"><span>indices_desc = np.argsort(arr)[::-1]</span></span>
<span class="line"><span></span></span>
<span class="line"><span>print(&quot;按降序排列的索引:&quot;, indices_desc)</span></span></code></pre></div><h2 id="查找" tabindex="-1">查找 <a class="header-anchor" href="#查找" aria-label="Permalink to &quot;查找&quot;">​</a></h2><h3 id="where-x" tabindex="-1">where(X) <a class="header-anchor" href="#where-x" aria-label="Permalink to &quot;where(X)&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>numpy.where(condition, [x, y])</span></span></code></pre></div><ul><li><strong><code>condition</code></strong>: 一个布尔型数组或条件表达式。该条件会对输入数组的每个元素进行评估，结果是一个布尔值数组。</li><li><strong><code>x</code></strong>: 如果条件为 <code>True</code>，则返回此值。</li><li><strong><code>y</code></strong>: 如果条件为 <code>False</code>，则返回此值。</li><li>way1:获取满足条件的元素索引：np.where(X&gt; 3)</li><li>way2:根据条件返回不同的值:np.where(arr &gt; 3, &#39;greater&#39;, &#39;less or equal&#39;)</li></ul><p>示例 1</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>arr = np.array([1, 2, 3, 4, 5])</span></span>
<span class="line"><span>result = np.where(arr &gt; 3, &#39;g&#39;, &#39;lore&#39;)</span></span>
<span class="line"><span>print(result)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[&#39;lore&#39; &#39;lore&#39; &#39;lore&#39; &#39;g&#39; &#39;g&#39;]</span></span></code></pre></div><p>示例 2</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>arr2 = np.array([[1, 2, 3, 4, 5],[5,4,3,2,1]])</span></span>
<span class="line"><span>result2 = np.where(arr2 &gt; 3)</span></span>
<span class="line"><span>print(result2)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>(array([0, 0, 1, 1]), array([3, 4, 0, 1]))</span></span></code></pre></div><h2 id="统计" tabindex="-1">统计 <a class="header-anchor" href="#统计" aria-label="Permalink to &quot;统计&quot;">​</a></h2><h3 id="unique" tabindex="-1">unique <a class="header-anchor" href="#unique" aria-label="Permalink to &quot;unique&quot;">​</a></h3><p>返回频数</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span>data = [&#39;apple&#39;, &#39;banana&#39;, &#39;apple&#39;, &#39;orange&#39;, &#39;banana&#39;, &#39;apple&#39;]</span></span>
<span class="line"><span>values, counts = np.unique(data, return_counts=True)</span></span>
<span class="line"><span>print(dict(zip(values, counts)))</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>{&#39;apple&#39;: 3, &#39;banana&#39;: 2, &#39;orange&#39;: 1}</span></span></code></pre></div><h2 id="数组类方法" tabindex="-1">数组类方法 <a class="header-anchor" href="#数组类方法" aria-label="Permalink to &quot;数组类方法&quot;">​</a></h2><h3 id="x-reshape-x" tabindex="-1">X.reshape(X) <a class="header-anchor" href="#x-reshape-x" aria-label="Permalink to &quot;X.reshape(X)&quot;">​</a></h3><h1 id="panda" tabindex="-1">panda <a class="header-anchor" href="#panda" aria-label="Permalink to &quot;panda&quot;">​</a></h1><h2 id="panda-类方法" tabindex="-1">panda 类方法 <a class="header-anchor" href="#panda-类方法" aria-label="Permalink to &quot;panda 类方法&quot;">​</a></h2><h3 id="x-value-counts" tabindex="-1">X.value_counts() <a class="header-anchor" href="#x-value-counts" aria-label="Permalink to &quot;X.value_counts()&quot;">​</a></h3><p>频数统计</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import pandas as pd</span></span>
<span class="line"><span></span></span>
<span class="line"><span>data = [&#39;apple&#39;, &#39;banana&#39;, &#39;apple&#39;, &#39;orange&#39;, &#39;banana&#39;, &#39;apple&#39;]</span></span>
<span class="line"><span>series = pd.Series(data)</span></span>
<span class="line"><span>freq = series.value_counts()</span></span>
<span class="line"><span>print(freq)</span></span></code></pre></div><p>输出：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>apple     3</span></span>
<span class="line"><span>banana    2</span></span>
<span class="line"><span>orange    1</span></span>
<span class="line"><span>Name: count, dtype: int64</span></span></code></pre></div><h1 id="zip" tabindex="-1">zip <a class="header-anchor" href="#zip" aria-label="Permalink to &quot;zip&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>a=(2,4,6,7)</span></span>
<span class="line"><span>print(list(zip(a,a)))</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[(2, 2), (4, 4), (6, 6), (7, 7)]</span></span></code></pre></div><h1 id="matplotlib" tabindex="-1">matplotlib <a class="header-anchor" href="#matplotlib" aria-label="Permalink to &quot;matplotlib&quot;">​</a></h1><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>pip install matplotlib</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>%matplotlib inline  #jupyter的内嵌显示</span></span></code></pre></div><h2 id="pyplot" tabindex="-1">pyplot <a class="header-anchor" href="#pyplot" aria-label="Permalink to &quot;pyplot&quot;">​</a></h2><h3 id="rcparams" tabindex="-1">rcParams[] <a class="header-anchor" href="#rcparams" aria-label="Permalink to &quot;rcParams[]&quot;">​</a></h3><p>绘图显示问题解决</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span># 设置中文显示</span></span>
<span class="line"><span>plt.rcParams[&#39;font.sans-serif&#39;] = [&#39;Microsoft YaHei&#39;]  # 使用微软雅黑字体</span></span>
<span class="line"><span>plt.rcParams[&#39;axes.unicode_minus&#39;] = False  # 解决负号显示问题</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import matplotlib</span></span>
<span class="line"><span>matplotlib.use(&#39;TkAgg&#39;)  # 或者 &#39;Agg&#39; 后端</span></span></code></pre></div><h3 id="plot" tabindex="-1">plot <a class="header-anchor" href="#plot" aria-label="Permalink to &quot;plot&quot;">​</a></h3><p>参数</p><table tabindex="0"><thead><tr><th>参数</th><th>说明</th><th>示例值</th></tr></thead><tbody><tr><td><code>x</code>, <code>y</code></td><td>数据点</td><td><code>x = np.linspace(0, 10, 100)</code></td></tr><tr><td><code>linestyle</code></td><td>线型</td><td><code>&#39;-&#39;, &#39;--&#39;, &#39;:&#39;, &#39;-.&#39;</code></td></tr><tr><td><code>color</code></td><td>线条颜色</td><td><code>&#39;r&#39;, &#39;g&#39;, &#39;b&#39;, &#39;k&#39;, &#39;#FF5733&#39;</code></td></tr><tr><td><code>marker</code></td><td>标记样式</td><td><code>&#39;o&#39;, &#39;x&#39;, &#39;s&#39;, &#39;^&#39;</code></td></tr><tr><td><code>markersize</code></td><td>标记大小</td><td><code>10</code></td></tr><tr><td><code>linewidth</code></td><td>线条宽度</td><td><code>2</code></td></tr><tr><td><code>alpha</code></td><td>透明度</td><td><code>0.5</code></td></tr><tr><td><code>label</code></td><td>图例标签</td><td><code>&#39;sin(x)&#39;</code></td></tr><tr><td><code>xlim</code></td><td>x 轴范围</td><td><code>[0, 10]</code></td></tr><tr><td><code>ylim</code></td><td>y 轴范围</td><td><code>[-1, 1]</code></td></tr><tr><td><code>zorder</code></td><td>绘制顺序</td><td><code>10</code></td></tr></tbody></table><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 示例数据</span></span>
<span class="line"><span>x = np.linspace(0, 10, 100)</span></span>
<span class="line"><span>y = np.sin(x)</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 绘制带有多种定制的图形</span></span>
<span class="line"><span>plt.plot(x, y,</span></span>
<span class="line"><span>         linestyle=&#39;--&#39;,  # 虚线</span></span>
<span class="line"><span>         marker=&#39;o&#39;,      # 圆形标记</span></span>
<span class="line"><span>         color=&#39;b&#39;,       # 蓝色</span></span>
<span class="line"><span>         markersize=5,    # 标记大小</span></span>
<span class="line"><span>         linewidth=2,     # 线宽</span></span>
<span class="line"><span>         alpha=0.7,       # 透明度</span></span>
<span class="line"><span>         label=&#39;sin(x)&#39;)  # 标签</span></span></code></pre></div><ul><li>一维绘图</li></ul><p>exp1</p><p>绘制以下函数曲线</p>`,203)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",b,s[0]||(s[0]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msup",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(4464.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(5464.6,0)"},[a("path",{"data-c":"38",d:"M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(5964.6,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(6433.6,0)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(6778.6,0)"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(7378.6,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(7767.6,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(8267.6,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(9061.8,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(10062,0)"},[a("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(10632,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[1]||(s[1]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("msup",null,[a("mi",null,"x"),a("mn",null,"2")]),a("mo",null,"−"),a("mn",null,"8"),a("mi",null,"s"),a("mi",null,"i"),a("mi",null,"n"),a("mo",{stretchy:"false"},"("),a("mn",null,"2"),a("mi",null,"x"),a("mo",null,"+"),a("mi",null,"π"),a("mo",{stretchy:"false"},")")],-1)])),_:1,__:[1]})]),_:1}),s[43]||(s[43]=o(`<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from scipy.optimize import brent, fmin_ncg, minimize</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import matplotlib.pyplot as pyplot</span></span>
<span class="line"><span># 1. Demo1：单变量无约束优化问题(Scipy.optimize.brent)</span></span>
<span class="line"><span>def objf(x):  # 目标函数</span></span>
<span class="line"><span>    fx = x**2 - 8*np.sin(2*x+np.pi)</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span>x=np.arange(-8,5,0.01)</span></span>
<span class="line"><span>pyplot.plot(x,objf(x))</span></span></code></pre></div><img src="`+m+`" alt="image-20250124145146176" style="zoom:33%;"><p>exp2</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span># 创建数据</span></span>
<span class="line"><span>x = [0, 1, 2, 3, 4]</span></span>
<span class="line"><span>y = [0, 1, 4, 9, 16]</span></span>
<span class="line"><span># 绘制折线图</span></span>
<span class="line"><span>plt.plot(x, y)</span></span>
<span class="line"><span># 添加标题和标签</span></span>
<span class="line"><span>plt.title(&quot;Basic Line Plot&quot;)</span></span>
<span class="line"><span>plt.xlabel(&quot;X Axis&quot;)</span></span>
<span class="line"><span>plt.ylabel(&quot;Y Axis&quot;)</span></span>
<span class="line"><span># 显示图表</span></span>
<span class="line"><span>plt.show()</span></span></code></pre></div><p>输出</p><img src="`+Q+`" alt="image-20250124151049413" style="zoom:33%;"><h3 id="figure-x" tabindex="-1">figure(X) <a class="header-anchor" href="#figure-x" aria-label="Permalink to &quot;figure(X)&quot;">​</a></h3><p>提高绘图像素</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>plt.figure(dpi=300)  # 提高分辨率</span></span></code></pre></div><h4 id="类方法" tabindex="-1">类方法 <a class="header-anchor" href="#类方法" aria-label="Permalink to &quot;类方法&quot;">​</a></h4><h4 id="add-axes" tabindex="-1">add_axes <a class="header-anchor" href="#add-axes" aria-label="Permalink to &quot;add_axes&quot;">​</a></h4><h5 id="add-subplot" tabindex="-1">add_subplot() <a class="header-anchor" href="#add-subplot" aria-label="Permalink to &quot;add_subplot()&quot;">​</a></h5><ul><li>创建 3D 坐标轴</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 创建图形对象</span></span>
<span class="line"><span>fig = plt.figure(dpi=300)</span></span>
<span class="line"><span># 创建 3D 坐标轴</span></span>
<span class="line"><span>ax = fig.add_axes([0, 0, 1, 1], projection=&#39;3d&#39;)</span></span></code></pre></div><h5 id="plot-surface-x-x-x" tabindex="-1">plot_surface(X,X,X) <a class="header-anchor" href="#plot-surface-x-x-x" aria-label="Permalink to &quot;plot_surface(X,X,X)&quot;">​</a></h5><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span>from mpl_toolkits.mplot3d import Axes3D</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建网格数据</span></span>
<span class="line"><span>x = np.linspace(-5, 5, 100)  # x 从 -5 到 5，生成 100 个点</span></span>
<span class="line"><span>y = np.linspace(-5, 5, 100)  # y 从 -5 到 5，生成 100 个点</span></span>
<span class="line"><span>x, y = np.meshgrid(x, y)     # 生成二维网格数据</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 定义 z = f(x, y) 函数（例如：z = sin(sqrt(x^2 + y^2))）</span></span>
<span class="line"><span>z = np.sin(np.sqrt(x**2 + y**2))</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建图形对象</span></span>
<span class="line"><span>fig = plt.figure(dpi=300)</span></span>
<span class="line"><span># 创建 3D 坐标轴</span></span>
<span class="line"><span>ax = fig.add_axes([0, 0, 1, 1], projection=&#39;3d&#39;)</span></span>
<span class="line"><span># 绘制曲面图</span></span>
<span class="line"><span>ax.plot_surface(x, y, z, cmap=&#39;viridis&#39;)</span></span>
<span class="line"><span># 设置标题和标签</span></span>
<span class="line"><span>ax.set_title(&#39;3D Surface Plot&#39;)</span></span>
<span class="line"><span>ax.set_xlabel(&#39;X&#39;)</span></span>
<span class="line"><span>ax.set_ylabel(&#39;Y&#39;)</span></span>
<span class="line"><span>ax.set_zlabel(&#39;Z&#39;)</span></span>
<span class="line"><span># 显示图形</span></span>
<span class="line"><span>plt.show()</span></span></code></pre></div><ul><li><p><strong>left</strong>：坐标轴左侧距离画布左边缘的相对位置，取值范围为 0 到 1，其中 0 表示完全靠左，1 表示完全靠右。</p></li><li><p><strong>bottom</strong>：坐标轴底部距离画布底边缘的相对位置，取值范围为 0 到 1，其中 0 表示完全靠底，1 表示完全靠上。</p></li><li><p><strong>width</strong>：坐标轴的宽度，取值范围为 0 到 1，表示相对于画布的宽度的比例。</p></li><li><p><strong>height</strong>：坐标轴的高度，取值范围为 0 到 1，表示相对于画布的高度的比例。</p></li><li><p><code>left = 0</code>：坐标轴的左边界与画布的左边界对齐。</p></li><li><p><code>bottom = 0</code>：坐标轴的底边界与画布的底边界对齐。</p></li><li><p><code>width = 1</code>：坐标轴的宽度占满整个画布的宽度。</p></li><li><p><code>height = 1</code>：坐标轴的高度占满整个画布的高度。</p></li></ul><img src="`+T+`" alt="image-20250124175308429" style="zoom:25%;"><p>透明度修改</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>ax.plot_surface(x,y,z,cmap=&#39;viridis&#39;,alpha=0.2)</span></span></code></pre></div><h5 id="plot3d" tabindex="-1">plot3D <a class="header-anchor" href="#plot3d" aria-label="Permalink to &quot;plot3D&quot;">​</a></h5><p>绘制三维曲线</p><h2 id="use-x" tabindex="-1">use(X) <a class="header-anchor" href="#use-x" aria-label="Permalink to &quot;use(X)&quot;">​</a></h2><p>绘图后端报错解决</p><blockquote><p>Traceback (most recent call last): canvas_class = module.FigureCanvas AttributeError: module &#39;backend_interagg&#39; has no attribute &#39;FigureCanvas&#39;</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import matplotlib</span></span>
<span class="line"><span>matplotlib.use(&#39;TkAgg&#39;)  # 或者 &#39;Qt5Agg&#39;</span></span>
<span class="line"><span>import matplotlib.pyplot as plt</span></span></code></pre></div></blockquote><h1 id="collections" tabindex="-1">collections <a class="header-anchor" href="#collections" aria-label="Permalink to &quot;collections&quot;">​</a></h1><h2 id="counter" tabindex="-1">Counter <a class="header-anchor" href="#counter" aria-label="Permalink to &quot;Counter&quot;">​</a></h2><p>频数统计</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from collections import Counter</span></span>
<span class="line"><span></span></span>
<span class="line"><span>data = [&#39;apple&#39;, &#39;banana&#39;, &#39;apple&#39;, &#39;orange&#39;, &#39;banana&#39;, &#39;apple&#39;]</span></span>
<span class="line"><span>freq = Counter(data)</span></span>
<span class="line"><span>print(freq)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Counter({&#39;apple&#39;: 3, &#39;banana&#39;: 2, &#39;orange&#39;: 1})</span></span></code></pre></div><h1 id="scipy" tabindex="-1">scipy <a class="header-anchor" href="#scipy" aria-label="Permalink to &quot;scipy&quot;">​</a></h1><h2 id="optimize" tabindex="-1">optimize <a class="header-anchor" href="#optimize" aria-label="Permalink to &quot;optimize&quot;">​</a></h2><ul><li>brent()：单变量无约束优化问题，混合使用牛顿法/二分法。</li><li>fmin()：多变量无约束优化问题，使用单纯性法，只需要利用函数值，不需要函数的导数或二阶导数。</li><li>leatsq()：非线性最小二乘问题，用于求解非线性最小二乘拟合问题。</li><li>minimize()：约束优化问题，使用拉格朗日乘子法将约束优化转化为无约束优化问题。</li></ul><h3 id="brent" tabindex="-1">brent() <a class="header-anchor" href="#brent" aria-label="Permalink to &quot;brent()&quot;">​</a></h3><p>单变量无约束优化问题</p><p><strong>optimize.brent() 的主要参数：</strong></p><ul><li><strong>func: callable f(x,*args)</strong> 　目标函数 f(x)f(x)，以函数形式表示，可以通过 *args 传递参数</li><li><strong>args: tuple</strong>　　可选项，以 f(x,*args) 的形式将可变参数 p 传递给目标函数 f(x,p)f(x,p) 。</li><li><strong>brack: tuple</strong>　　可选项，搜索算法的开始区间（不是指 x 的上下限）</li></ul><p><strong>optimize.brent() 的主要返回值：</strong></p><ul><li>**xmin: ** 　　返回函数达到最小值时的 x（注意是局部最优，不一定是全局最优）。</li><li>**fval: ** 　　返回函数的最优值（默认不返回，仅当 full_output 为 1 时返回）。</li></ul><p>例题</p>`,41)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",y,s[2]||(s[2]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msup",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(4464.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(5464.6,0)"},[a("path",{"data-c":"38",d:"M70 417T70 494T124 618T248 666Q319 666 374 624T429 515Q429 485 418 459T392 417T361 389T335 371T324 363L338 354Q352 344 366 334T382 323Q457 264 457 174Q457 95 399 37T249 -22Q159 -22 101 29T43 155Q43 263 172 335L154 348Q133 361 127 368Q70 417 70 494ZM286 386L292 390Q298 394 301 396T311 403T323 413T334 425T345 438T355 454T364 471T369 491T371 513Q371 556 342 586T275 624Q268 625 242 625Q201 625 165 599T128 534Q128 511 141 492T167 463T217 431Q224 426 228 424L286 386ZM250 21Q308 21 350 55T392 137Q392 154 387 169T375 194T353 216T330 234T301 253T274 270Q260 279 244 289T218 306L210 311Q204 311 181 294T133 239T107 157Q107 98 150 60T250 21Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(6186.8,0)"},[a("path",{"data-c":"2217",d:"M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(6909,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(7378,0)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(7723,0)"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(8323,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(8712,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9212,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(10006.2,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(11006.4,0)"},[a("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(11576.4,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[3]||(s[3]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("msup",null,[a("mi",null,"x"),a("mn",null,"2")]),a("mo",null,"−"),a("mn",null,"8"),a("mo",null,"∗"),a("mi",null,"s"),a("mi",null,"i"),a("mi",null,"n"),a("mo",{stretchy:"false"},"("),a("mn",null,"2"),a("mi",null,"x"),a("mo",null,"+"),a("mi",null,"π"),a("mo",{stretchy:"false"},")")],-1)])),_:1,__:[3]})]),_:1}),s[44]||(s[44]=o(`<p>代码</p><p>最简</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from scipy.optimize import brent</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span># 1. Demo1：单变量无约束优化问题(Scipy.optimize.brent)</span></span>
<span class="line"><span>def objf(x):  # 目标函数</span></span>
<span class="line"><span>    fx = x**2 - 8*np.sin(2*x+np.pi)</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span>plt.figure()</span></span>
<span class="line"><span># 初始值</span></span>
<span class="line"><span>xIni = -5.0</span></span>
<span class="line"><span># 调用brent进行优化</span></span>
<span class="line"><span>xOpt = brent(objf, brack=(xIni, 1))</span></span>
<span class="line"><span>print(&quot;最优自变量{0:.4f},最优目标函数{1:.4f}&quot;.format(xOpt,objf(xOpt)))</span></span></code></pre></div><p>绘图</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from scipy.optimize import brent</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span>recorder=[[],[]]</span></span>
<span class="line"><span># 1. Demo1：单变量无约束优化问题(Scipy.optimize.brent)</span></span>
<span class="line"><span>def objf(x):  # 目标函数</span></span>
<span class="line"><span>    global recorder</span></span>
<span class="line"><span>    fx = x**2 - 8*np.sin(2*x+np.pi)</span></span>
<span class="line"><span>    recorder[0].append(x)</span></span>
<span class="line"><span>    recorder[1].append(fx)</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span>plt.figure()</span></span>
<span class="line"><span># 初始值</span></span>
<span class="line"><span>xIni = -5.0</span></span>
<span class="line"><span># 调用brent进行优化</span></span>
<span class="line"><span>xOpt = brent(objf, brack=(xIni, 1))</span></span>
<span class="line"><span>print(&quot;最优自变量{0:.4f},最优目标函数{1:.4f}&quot;.format(xOpt,objf(xOpt)))</span></span>
<span class="line"><span># 绘制目标函数曲线</span></span>
<span class="line"><span>x = np.arange(-8, 12, 0.01)</span></span>
<span class="line"><span>plt.plot(x, objf(x)) #原始数据</span></span>
<span class="line"><span>plt.plot(recorder[0][:-1],recorder[1][:-1],linestyle=&quot;--&quot;)  #迭代过程</span></span>
<span class="line"><span>plt.scatter(recorder[0][:-1],recorder[1][:-1],c=&quot;r&quot;)  #迭代过程</span></span>
<span class="line"><span>plt.title(&quot;brent优化&quot;)</span></span>
<span class="line"><span>plt.show()</span></span></code></pre></div><img src="`+h+'" alt="image-20250124173356967" style="zoom:33%;"><h3 id="fmin" tabindex="-1">fmin() <a class="header-anchor" href="#fmin" aria-label="Permalink to &quot;fmin()&quot;">​</a></h3><p>多变量无约束优化问题</p><p><strong>optimize.fmin() 的主要参数：</strong></p><ul><li><strong>func: callable f(x,*args)</strong> 　目标函数 f(x)f(x)，以函数形式表示，可以通过 *args 传递参数。</li><li><strong>x0: nadarray</strong>　　搜索算法的初值。</li><li><strong>args: tuple</strong>　　可选项，以 f(x,*args) 的形式将可变参数 p 传递给目标函数 f(x,p) 。</li></ul><p><strong>optimize.fmin() 的主要返回值：</strong></p><ul><li>**xopt: ** 　　返回最小值时的 x 值。</li><li>**fopt: ** 　　返回最小值时的目标函数值，fopt=func(xopt)。</li></ul><p>exp1</p>',13)),a("p",null,[s[6]||(s[6]=r("测试以下函数（Rosenbrock 测试函数），自变量为")),n(p,{class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},{default:t(()=>[(i(),e("svg",f,s[4]||(s[4]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(389,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(1397.6,0)"},[a("path",{"data-c":"2C",d:"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(1842.2,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(2850.8,0)"},[a("path",{"data-c":"2C",d:"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(3295.4,0)"},[a("path",{"data-c":"2026",d:"M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60ZM525 60Q525 84 542 102T585 120Q609 120 627 104T646 61Q646 36 629 18T586 0T543 17T525 60ZM972 60Q972 84 989 102T1032 120Q1056 120 1074 104T1093 61Q1093 36 1076 18T1033 0T990 17T972 60Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(4634.1,0)"},[a("path",{"data-c":"2C",d:"M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(5078.8,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(6158,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:t(()=>s[5]||(s[5]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mo",{stretchy:"false"},"("),a("msub",null,[a("mi",null,"x"),a("mn",null,"1")]),a("mo",null,","),a("msub",null,[a("mi",null,"x"),a("mn",null,"2")]),a("mo",null,","),a("mo",null,"…"),a("mo",null,","),a("msub",null,[a("mi",null,"x"),a("mi",null,"n")]),a("mo",{stretchy:"false"},")")],-1)])),_:1,__:[5]})]),_:1})]),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",v,s[7]||(s[7]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"munderover",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"2211",d:"M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(148.2,-1087.9) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(345,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1123,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(58,1150) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(600,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1378,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])])]),a("g",{"data-mml-node":"mo",transform:"translate(4677.6,0)"},[a("path",{"data-c":"5B",d:"M118 -250V750H255V710H158V-210H255V-250H118Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(4955.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(1000,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(6455.6,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(6844.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(605,-150) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(345,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1123,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])])]),a("g",{"data-mml-node":"mo",transform:"translate(8869.4,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msubsup",transform:"translate(9869.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-247) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"msup",transform:"translate(10878.2,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(422,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(11926,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(12926.2,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(13315.2,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(14037.4,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(15037.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"msup",transform:"translate(15936.6,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(422,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(16762.1,0)"},[a("path",{"data-c":"5D",d:"M22 710V750H159V-250H22V-210H119V710H22Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[8]||(s[8]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"n"),a("mo",null,"−"),a("mn",null,"1")])]),a("mo",{stretchy:"false"},"["),a("mn",null,"100"),a("mo",{stretchy:"false"},"("),a("msub",null,[a("mi",null,"x"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mo",null,"+"),a("mn",null,"1")])]),a("mo",null,"−"),a("msubsup",null,[a("mi",null,"x"),a("mi",null,"i"),a("mn",null,"2")]),a("msup",null,[a("mo",{stretchy:"false"},")"),a("mn",null,"2")]),a("mo",null,"+"),a("mo",{stretchy:"false"},"("),a("mn",null,"1"),a("mo",null,"−"),a("msub",null,[a("mi",null,"x"),a("mi",null,"i")]),a("msup",null,[a("mo",{stretchy:"false"},")"),a("mn",null,"2")]),a("mo",{stretchy:"false"},"]")],-1)])),_:1,__:[8]})]),_:1}),s[45]||(s[45]=a("p",null,"当函数为",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",_,s[9]||(s[9]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(3233.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(1000,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(4733.6,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(5122.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(6353.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msubsup",transform:"translate(7353.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,-247) scale(0.707)"},[a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"msup",transform:"translate(8362.1,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(422,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(9409.9,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(10410.1,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(10799.1,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(11521.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(12521.5,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"msup",transform:"translate(13530.1,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(422,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[10]||(s[10]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("mn",null,"100"),a("mo",{stretchy:"false"},"("),a("msub",null,[a("mi",null,"x"),a("mn",null,"1")]),a("mo",null,"−"),a("msubsup",null,[a("mi",null,"x"),a("mn",null,"0"),a("mn",null,"2")]),a("msup",null,[a("mo",{stretchy:"false"},")"),a("mn",null,"2")]),a("mo",null,"+"),a("mo",{stretchy:"false"},"("),a("mn",null,"1"),a("mo",null,"−"),a("msub",null,[a("mi",null,"x"),a("mn",null,"0")]),a("msup",null,[a("mo",{stretchy:"false"},")"),a("mn",null,"2")])],-1)])),_:1,__:[10]})]),_:1}),s[46]||(s[46]=o(`<p>代码</p><p>最简</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from scipy.optimize import brent, fmin, minimize</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 2. Demo2：多变量无约束优化问题(Scipy.optimize.brent)</span></span>
<span class="line"><span># Rosenbrock 测试函数</span></span>
<span class="line"><span>def objf2(x):  # Rosenbrock benchmark function</span></span>
<span class="line"><span>    fx = sum(100.0 * (x[1:] - x[:-1] ** 2.0) ** 2.0 + (1 - x[:-1]) ** 2.0)</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span></span></span>
<span class="line"><span>xIni = np.array([-2, -2])</span></span>
<span class="line"><span>xOpt = fmin(objf2, xIni)</span></span>
<span class="line"><span>print(&quot;最优自变量{0},最优目标函数{1:.4f}&quot;.format(xOpt,objf2(xOpt)))</span></span></code></pre></div><p>绘图</p><p>exp2：测试以下函数</p>`,5)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",w,s[11]||(s[11]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"munderover",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"2211",d:"M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(148.2,-1087.9) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(345,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1123,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(509.9,1150) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])]),a("g",{"data-mml-node":"mo",transform:"translate(4677.6,0)"},[a("path",{"data-c":"5B",d:"M118 -250V750H255V710H158V-210H255V-250H118Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msubsup",transform:"translate(4955.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-247) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(6186.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(7186.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(8186.6,0)"},[a("path",{"data-c":"1D450",d:"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(8619.6,0)"},[a("path",{"data-c":"1D45C",d:"M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9104.6,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(9573.6,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(9962.6,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(10462.6,0)"},[a("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(11032.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(11931.5,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(12542.7,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(13542.9,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(14542.9,0)"},[a("path",{"data-c":"5D",d:"M22 710V750H159V-250H22V-210H119V710H22Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[12]||(s[12]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"n")])]),a("mo",{stretchy:"false"},"["),a("msubsup",null,[a("mi",null,"x"),a("mi",null,"i"),a("mn",null,"2")]),a("mo",null,"−"),a("mn",null,"10"),a("mi",null,"c"),a("mi",null,"o"),a("mi",null,"s"),a("mo",{stretchy:"false"},"("),a("mn",null,"2"),a("mi",null,"π"),a("msub",null,[a("mi",null,"x"),a("mi",null,"i")]),a("mo",{stretchy:"false"},")"),a("mo",null,"+"),a("mn",null,"10"),a("mo",{stretchy:"false"},"]")],-1)])),_:1,__:[12]})]),_:1}),s[47]||(s[47]=o(`<p>二维示例</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#fmin二维测试显示</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> scipy.optimize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fmin, minimize</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> numpy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matplotlib.pyplot </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> plt</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">recorder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[],[],[]] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#x,y,val</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. Demo2：多变量无约束优化问题(Scipy.optimize.brent)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rosenbrock 测试函数</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> objf2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x):  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Rosenbrock benchmark function</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.cos(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.pi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append(x[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append(x[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].append(fx)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fx</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> objf2_f</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x,y):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.cos(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.pi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.cos(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.pi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xIni </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> np.array([</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">xOpt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fmin(objf2, xIni)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.arange(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.arange(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.01</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">z</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.array([[objf2_f(x[i],y[j]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x))] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> j </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(y))]) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#生成z</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">x,y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">np.meshgrid(x,y) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#生成x,y</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fig</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.figure(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dpi</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fig.add_axes([</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">projection</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;3d&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax.plot_surface(x,y,z,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">cmap</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;viridis&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">alpha</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax.plot3D(recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],recorder[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r-&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax.set_xlabel(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;X&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax.set_ylabel(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Y&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ax.set_zlabel(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Z&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;最优自变量</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{0}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,最优目标函数</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:.4f</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(xOpt,objf2(xOpt)))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plt.show()</span></span></code></pre></div><p>绘图（显然落入局部最优解）</p><img src="`+u+`" alt="image-20250124185951933" style="zoom:33%;"><h3 id="minimize" tabindex="-1">minimize() <a class="header-anchor" href="#minimize" aria-label="Permalink to &quot;minimize()&quot;">​</a></h3><p>调用多种算法，支持约束优化和无约束优化</p><p><strong>optimize.minimize() 的默认算法为 BFGS, L-BFGS-B, SLSQP（取决于问题有没有边界条件和约束条件），可以通过 &quot;method=None&quot; 选项调用多种算法：</strong></p><p><strong>optimize.minimize() 的主要参数：</strong></p><ul><li><strong>fun: callable f(x,*args)</strong> 　目标函数 f(x)f(x)，以函数形式表示，可以通过 *args 传递参数。</li><li><strong>x0: nadarray</strong>, shape(n,)　　搜索算法的初值，n 是决策变量个数。</li><li><strong>args: tuple</strong>　　可选项，将可变参数传递给目标函数 fun、导数函数 jac 和二阶导数函数 hess。</li><li><strong>method: str</strong>　　可选项，选择优化算法。默认算法为 BFGS, L-BFGS-B, SLSQP（取决于问题有没有边界条件和约束条件）</li><li>**jac: **　　可选项，梯度计算方法。可以以函数形式表示，或选择 &#39;2-point&#39;, &#39;3-point&#39;, &#39;cs&#39;。该选项只能用于 CG, BFGS, Newton-CG, L-BFGS-B, TNC, SLSQP, dogleg, trust-ncg, trust-krylov, trust-exact 和 trust-constr 算法。</li><li>**hess: **　　可选项，Hessian 矩阵计算方法。可以以函数形式表示，或选择 &#39;2-point&#39;, &#39;3-point&#39;, &#39;cs&#39;。该选项只能用于 Newton-CG, dogleg, trust-ncg, trust-krylov, trust-exact 和 trust-constr 算法。</li><li>**bounds: **　　可选项，变量的边界条件（上下限，lb&lt;=x&lt;=ub）。该选项只能用于 Nelder-Mead, L-BFGS-B, TNC, SLSQP, Powell 和 trust-constr 算法。</li><li>**constraints: **　　可选项，定义约束条件 f(x)&gt;=0。该选项只能用于 COBYLA, SLSQP 和 trust-constr 算法，注意不同算法中对于约束条件的定义是不同的。</li></ul><p><strong>optimize.minimize() 的主要返回值：</strong></p><ul><li>**res: ** 　　返回优化结果，以对象方式表示，主要包括优化是否成功、决策变量的优化值 xOpt。</li></ul><p><strong>无约束问题优化算法</strong></p><ul><li>**method=‘CG’ **：　　非线性共轭梯度算法，只能处理无约束优化问题，需要使用一阶导数函数。</li><li>**method=‘BFGS’ **：　　 BFGS 拟牛顿法，只能处理无约束优化问题，需要使用一阶导数函数。BFGS 算法性能良好，是无约束优化问题的默认算法。</li><li>**method=‘Newton-CG’ **：　　截断牛顿法，只能处理无约束优化问题，需要使用一阶导数函数，适合处理大规模问题。</li><li>**method=‘dogleg’ **：　　 dog-leg 信赖域算法，需要使用梯度和 Hessian（必须正定），只能处理无约束优化问题，</li><li>**method=‘trust-ncg’ **：　　采用牛顿共轭梯度信赖域算法，需要使用梯度和 Hessian（必须正定），只能处理无约束优化问题，适合大规模问题。</li><li><strong>method=‘trust-exact’</strong>：　　求解无约束极小化问题的信赖域方法，需要梯度和 Hessian（不需要正定）。</li><li><strong>method=‘trust-krylov’</strong>：　　使用 Newton-GLTR 信赖域算法度，需要使用梯度和 Hessian（必须正定），只能处理无约束优化问题，适合中大规模问题。</li></ul><p><strong>边界约束条件问题优化算法</strong></p><ul><li><strong>method=‘Nelder-Mead’</strong>：　　下山单纯性法，可以处理边界约束条件（决策变量的上下限），只使用目标函数，不使用导数函数、二阶导数，鲁棒性强。</li><li>**method=‘L-BFGS-B’ **：　　改进的 BFGS 拟牛顿法，L- 指有限内存，-B 指边界约束，可以处理边界约束条件，需要使用一阶导数函数。L-BFGS_B 算法性能良好，消耗内存量很小，适合处理大规模问题，是边界约束优化问题的默认算法。</li><li><strong>method=‘Powell’</strong>：　　改进的共轭方向法，可以处理边界约束条件（决策变量的上下限）。</li><li>**method=‘TNC’ **：　　截断牛顿法，可以处理边界约束条件</li></ul><p><strong>带有约束条件问题优化算法</strong></p><ul><li>**method=‘COBYLA’ **：　　线性近似约束优化方法，通过对目标函数和约束条件的线性逼近处理非线性问题。只使用目标函数，不需要导数或二阶导数值，可以处理约束条件。</li><li>**method=‘SLSQP’ **：　　序贯最小二乘规划算法，可以处理边界约束、等式约束和不等式约束条件。SLSQP 算法性能良好，是带有约束条件优化问题的默认算法。</li><li>**method=‘trust-constr’ **：　　信赖域算法，通用的约束最优化方法，适合处理大规模问题。</li></ul><h1 id="torch" tabindex="-1">torch <a class="header-anchor" href="#torch" aria-label="Permalink to &quot;torch&quot;">​</a></h1><h2 id="manual-seed-x" tabindex="-1">manual_seed(X) <a class="header-anchor" href="#manual-seed-x" aria-label="Permalink to &quot;manual_seed(X)&quot;">​</a></h2><p>固定随机种子</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import random</span></span>
<span class="line"><span></span></span>
<span class="line"><span>def set_seed(seed):</span></span>
<span class="line"><span>    # 固定Python的随机种子</span></span>
<span class="line"><span>    random.seed(seed)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 固定NumPy的随机种子</span></span>
<span class="line"><span>    np.random.seed(seed)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 固定PyTorch的随机种子</span></span>
<span class="line"><span>    torch.manual_seed(seed)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 如果使用GPU，还需要固定CUDA的随机种子</span></span>
<span class="line"><span>    torch.cuda.manual_seed(seed)</span></span>
<span class="line"><span>    torch.cuda.manual_seed_all(seed)  # 如果使用多个GPU</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 保证每次运行时的结果完全一致</span></span>
<span class="line"><span>    torch.backends.cudnn.deterministic = True</span></span>
<span class="line"><span>    torch.backends.cudnn.benchmark = False</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 设置随机种子</span></span>
<span class="line"><span>seed = 42</span></span>
<span class="line"><span>set_seed(seed)</span></span></code></pre></div><h2 id="tensor-x" tabindex="-1">tensor(X) <a class="header-anchor" href="#tensor-x" aria-label="Permalink to &quot;tensor(X)&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>input_tensor = torch.tensor([[[[1, 2, 3, 4],</span></span>
<span class="line"><span>                               [5, 6, 7, 8],</span></span>
<span class="line"><span>                               [9, 10, 11, 12],</span></span>
<span class="line"><span>                               [13, 14, 15, 16]]]], dtype=torch.float32)</span></span></code></pre></div><p># 创建一个示例输入，大小为 (1, 1, 4, 4)，即 1 个样本，1 个通道，4x4 的特征图</p><ul><li><blockquote><p><strong>RuntimeError</strong>: Found dtype Long but expected Float</p><p>dtype=torch.float32 声明很重要，用于解决该问题</p></blockquote></li></ul><h3 id="dot-x-x" tabindex="-1">dot(X,X) <a class="header-anchor" href="#dot-x-x" aria-label="Permalink to &quot;dot(X,X)&quot;">​</a></h3><ul><li>含求和</li></ul>`,27)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",H,s[13]||(s[13]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(520,0)"},[a("path",{"data-c":"1D45C",d:"M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1005,0)"},[a("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1366,0)"},[a("path",{"data-c":"1D45D",d:"M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1869,0)"},[a("path",{"data-c":"1D45F",d:"M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(2320,0)"},[a("path",{"data-c":"1D45C",d:"M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(2805,0)"},[a("path",{"data-c":"1D451",d:"M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(3325,0)"},[a("path",{"data-c":"1D462",d:"M21 287Q21 295 30 318T55 370T99 420T158 442Q204 442 227 417T250 358Q250 340 216 246T182 105Q182 62 196 45T238 27T291 44T328 78L339 95Q341 99 377 247Q407 367 413 387T427 416Q444 431 463 431Q480 431 488 421T496 402L420 84Q419 79 419 68Q419 43 426 35T447 26Q469 29 482 57T512 145Q514 153 532 153Q551 153 551 144Q550 139 549 130T540 98T523 55T498 17T462 -8Q454 -10 438 -10Q372 -10 347 46Q345 45 336 36T318 21T296 6T267 -6T233 -11Q189 -11 155 7Q103 38 103 113Q103 170 138 262T173 379Q173 380 173 381Q173 390 173 393T169 400T158 404H154Q131 404 112 385T82 344T65 302T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(3897,0)"},[a("path",{"data-c":"1D450",d:"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(4330,0)"},[a("path",{"data-c":"1D461",d:"M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(4968.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(6024.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(6524.6,0)"},[a("path",{"data-c":"D7",d:"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(7302.6,0)"},[a("path",{"data-c":"34",d:"M462 0Q444 3 333 3Q217 3 199 0H190V46H221Q241 46 248 46T265 48T279 53T286 61Q287 63 287 115V165H28V211L179 442Q332 674 334 675Q336 677 355 677H373L379 671V211H471V165H379V114Q379 73 379 66T385 54Q393 47 442 46H471V0H462ZM293 211V545L74 212L183 211H293Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(8024.8,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(9025,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9525,0)"},[a("path",{"data-c":"D7",d:"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(10303,0)"},[a("path",{"data-c":"35",d:"M164 157Q164 133 148 117T109 101H102Q148 22 224 22Q294 22 326 82Q345 115 345 210Q345 313 318 349Q292 382 260 382H254Q176 382 136 314Q132 307 129 306T114 304Q97 304 95 310Q93 314 93 485V614Q93 664 98 664Q100 666 102 666Q103 666 123 658T178 642T253 634Q324 634 389 662Q397 666 402 666Q410 666 410 648V635Q328 538 205 538Q174 538 149 544L139 546V374Q158 388 169 396T205 412T256 420Q337 420 393 355T449 201Q449 109 385 44T229 -22Q148 -22 99 32T50 154Q50 178 61 192T84 210T107 214Q132 214 148 197T164 157Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(11025.2,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(12025.4,0)"},[a("path",{"data-c":"33",d:"M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(12525.4,0)"},[a("path",{"data-c":"D7",d:"M630 29Q630 9 609 9Q604 9 587 25T493 118L389 222L284 117Q178 13 175 11Q171 9 168 9Q160 9 154 15T147 29Q147 36 161 51T255 146L359 250L255 354Q174 435 161 449T147 471Q147 480 153 485T168 490Q173 490 175 489Q178 487 284 383L389 278L493 382Q570 459 587 475T609 491Q630 491 630 471Q630 464 620 453T522 355L418 250L522 145Q606 61 618 48T630 29Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(13303.4,0)"},[a("path",{"data-c":"36",d:"M42 313Q42 476 123 571T303 666Q372 666 402 630T432 550Q432 525 418 510T379 495Q356 495 341 509T326 548Q326 592 373 601Q351 623 311 626Q240 626 194 566Q147 500 147 364L148 360Q153 366 156 373Q197 433 263 433H267Q313 433 348 414Q372 400 396 374T435 317Q456 268 456 210V192Q456 169 451 149Q440 90 387 34T253 -22Q225 -22 199 -14T143 16T92 75T56 172T42 313ZM257 397Q227 397 205 380T171 335T154 278T148 216Q148 133 160 97T198 39Q222 21 251 21Q302 21 329 59Q342 77 347 104T352 209Q352 289 347 316T329 361Q302 397 257 397Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(14081.2,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(15137,0)"},[a("path",{"data-c":"33",d:"M127 463Q100 463 85 480T69 524Q69 579 117 622T233 665Q268 665 277 664Q351 652 390 611T430 522Q430 470 396 421T302 350L299 348Q299 347 308 345T337 336T375 315Q457 262 457 175Q457 96 395 37T238 -22Q158 -22 100 21T42 130Q42 158 60 175T105 193Q133 193 151 175T169 130Q169 119 166 110T159 94T148 82T136 74T126 70T118 67L114 66Q165 21 238 21Q293 21 321 74Q338 107 338 175V195Q338 290 274 322Q259 328 213 329L171 330L168 332Q166 335 166 348Q166 366 174 366Q202 366 232 371Q266 376 294 413T322 525V533Q322 590 287 612Q265 626 240 626Q208 626 181 615T143 592T132 580H135Q138 579 143 578T153 573T165 566T175 555T183 540T186 520Q186 498 172 481T127 463Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[14]||(s[14]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"d"),a("mi",null,"o"),a("mi",null,"t"),a("mi",null,"p"),a("mi",null,"r"),a("mi",null,"o"),a("mi",null,"d"),a("mi",null,"u"),a("mi",null,"c"),a("mi",null,"t"),a("mo",null,"="),a("mn",null,"1"),a("mi",null,"×"),a("mn",null,"4"),a("mo",null,"+"),a("mn",null,"2"),a("mi",null,"×"),a("mn",null,"5"),a("mo",null,"+"),a("mn",null,"3"),a("mi",null,"×"),a("mn",null,"6"),a("mo",null,"="),a("mn",null,"32")],-1)])),_:1,__:[14]})]),_:1}),s[48]||(s[48]=o(`<div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建两个一维张量（向量）</span></span>
<span class="line"><span>vec1 = torch.tensor([1, 2, 3])</span></span>
<span class="line"><span>vec2 = torch.tensor([4, 5, 6])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 计算点乘</span></span>
<span class="line"><span>dot_product = torch.dot(vec1, vec2)</span></span>
<span class="line"><span>print(dot_product)  # 输出: tensor(32)</span></span></code></pre></div><h3 id="mul" tabindex="-1">mul * <a class="header-anchor" href="#mul" aria-label="Permalink to &quot;mul \\*&quot;">​</a></h3><ul><li>不含求和—张量间的逐元素乘法（Hadamard 乘积）</li><li>mul</li><li><code>tensor1 * tensor2</code>：是逐元素乘法（Hadamard Product），即对两个张量中对应位置的元素执行乘法操作。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 逐元素乘法</span></span>
<span class="line"><span>tensor1 = torch.tensor([1, 2, 3])</span></span>
<span class="line"><span>tensor2 = torch.tensor([4, 5, 6])</span></span>
<span class="line"><span>result = torch.mul(tensor1, tensor2)</span></span>
<span class="line"><span>print(result)  # 输出: tensor([4, 10, 18])</span></span></code></pre></div><h3 id="矩阵乘法-matmul" tabindex="-1">矩阵乘法 matmul @ <a class="header-anchor" href="#矩阵乘法-matmul" aria-label="Permalink to &quot;矩阵乘法 matmul @&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 创建两个矩阵</span></span>
<span class="line"><span>matrix1 = torch.tensor([[1, 2], [3, 4]])</span></span>
<span class="line"><span>matrix2 = torch.tensor([[5, 6], [7, 8]])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 矩阵乘法</span></span>
<span class="line"><span>matrix_result = torch.matmul(matrix1, matrix2)</span></span>
<span class="line"><span>print(matrix_result)</span></span>
<span class="line"><span># 输出:</span></span>
<span class="line"><span># tensor([[19, 22],</span></span>
<span class="line"><span>#         [43, 50]])</span></span></code></pre></div><h3 id="sum-x-x" tabindex="-1">sum(X,X) <a class="header-anchor" href="#sum-x-x" aria-label="Permalink to &quot;sum(X,X)&quot;">​</a></h3><p><code>torch.sum()</code> 对不同维度进行求和</p><p>选择哪个维度，哪个维度就消失，从左往右维度因此增大</p><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建一个随机的 4D tensor，形状为 [2, 3, 4, 5]</span></span>
<span class="line"><span>tensor = torch.randn(2, 3, 4, 5)</span></span>
<span class="line"><span>print(tensor.shape)</span></span>
<span class="line"><span>sum_dim0 = torch.sum(tensor, dim=0)</span></span>
<span class="line"><span>print(sum_dim0.shape)</span></span>
<span class="line"><span>sum_dim1 = torch.sum(tensor, dim=1)</span></span>
<span class="line"><span>print(sum_dim1.shape)</span></span>
<span class="line"><span>sum_dim2 = torch.sum(tensor, dim=2)</span></span>
<span class="line"><span>print(sum_dim2.shape)</span></span>
<span class="line"><span>sum_dim3 = torch.sum(tensor, dim=3)</span></span>
<span class="line"><span>print(sum_dim3.shape)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>torch.Size([2, 3, 4, 5])</span></span>
<span class="line"><span>torch.Size([3, 4, 5])</span></span>
<span class="line"><span>torch.Size([2, 4, 5])</span></span>
<span class="line"><span>torch.Size([2, 3, 5])</span></span>
<span class="line"><span>torch.Size([2, 3, 4])</span></span></code></pre></div><p>二维例子</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span>tensor = torch.randn(4, 5)</span></span>
<span class="line"><span>print(tensor)</span></span>
<span class="line"><span>sum_dim0 = torch.sum(tensor, dim=0)</span></span>
<span class="line"><span>print(sum_dim0)</span></span>
<span class="line"><span>sum_dim1 = torch.sum(tensor, dim=1)</span></span>
<span class="line"><span>print(sum_dim1)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[-0.1844,  0.3563,  0.5837,  0.5701, -1.5140],</span></span>
<span class="line"><span>        [-0.0333, -0.0310,  1.2362, -1.1672,  0.0206],</span></span>
<span class="line"><span>        [ 0.2273, -1.7302,  0.3273, -0.5446,  0.7029],</span></span>
<span class="line"><span>        [-0.6730, -1.3433, -0.1589,  0.0871,  0.4764]])</span></span>
<span class="line"><span>tensor([-0.6634, -2.7482,  1.9882, -1.0547, -0.3140])</span></span>
<span class="line"><span>tensor([-0.1884,  0.0253, -1.0173, -1.6117])</span></span></code></pre></div><p>二维含 keepdim=True</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建一个随机的 4D tensor，形状为 [4, 5]</span></span>
<span class="line"><span>tensor = torch.randn(4, 5)</span></span>
<span class="line"><span>print(tensor)</span></span>
<span class="line"><span>sum_dim0 = torch.sum(tensor, dim=0,keepdim=True)</span></span>
<span class="line"><span>print(sum_dim0)</span></span>
<span class="line"><span>sum_dim1 = torch.sum(tensor, dim=1,keepdim=True)</span></span>
<span class="line"><span>print(sum_dim1)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[ 0.4784, -0.2342, -0.1696, -2.3909,  0.0512],</span></span>
<span class="line"><span>        [-2.8756,  0.3617,  0.2353,  0.4298,  0.9255],</span></span>
<span class="line"><span>        [ 0.9035,  0.3142,  0.1474, -1.0814, -0.3236],</span></span>
<span class="line"><span>        [-0.3079, -1.4627,  0.0399,  0.2887,  0.4411]])</span></span>
<span class="line"><span>tensor([[-1.8016, -1.0210,  0.2531, -2.7538,  1.0942]])</span></span>
<span class="line"><span>tensor([[-2.2651],</span></span>
<span class="line"><span>        [-0.9232],</span></span>
<span class="line"><span>        [-0.0399],</span></span>
<span class="line"><span>        [-1.0008]])</span></span></code></pre></div><h3 id="类方法-1" tabindex="-1">类方法 <a class="header-anchor" href="#类方法-1" aria-label="Permalink to &quot;类方法&quot;">​</a></h3><h4 id="x-shape" tabindex="-1">X.shape <a class="header-anchor" href="#x-shape" aria-label="Permalink to &quot;X.shape&quot;">​</a></h4><p>返回 tensor 类型的数据形状</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>predata=torch.tensor([0.1, 0.9, 0.2, 0.8, 0.7, 0.3])</span></span>
<span class="line"><span>N=predata.shape #torch.Size([6])</span></span></code></pre></div><p>返回单一数值</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>predata=torch.tensor([0.1, 0.9, 0.2, 0.8, 0.7, 0.3])</span></span>
<span class="line"><span>N=predata.shape[0]  #6</span></span></code></pre></div><p>元组返回形状</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>predata=torch.tensor([[0.1, 0.9, 0.2, 0.8, 0.7, 0.3],</span></span>
<span class="line"><span>                      [0.1, 0.9, 0.2, 0.8, 0.7, 0.3]])</span></span>
<span class="line"><span>N=tuple(predata.shape)  #(2, 6)</span></span></code></pre></div><h4 id="x-sum-x-axis-x" tabindex="-1">X.sum(X,axis=X) <a class="header-anchor" href="#x-sum-x-axis-x" aria-label="Permalink to &quot;X.sum(X,axis=X)&quot;">​</a></h4><ul><li>不含维度数据：全部求和</li><li>含维度数据：压缩对应维度</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>predata = torch.tensor([[[0.1, 0.9, 0.2],  # 样本1的三个预测值</span></span>
<span class="line"><span>                        [0.8, 0.7, 0.3],  # 样本2的三个预测值</span></span>
<span class="line"><span>                        [0.4, 0.1, 0.6],</span></span>
<span class="line"><span>                        [0.4, 0.1, 0.6]],</span></span>
<span class="line"><span>                        [[0.1, 0.9, 0.2],  # 样本1的三个预测值</span></span>
<span class="line"><span>                        [0.8, 0.7, 0.3],  # 样本2的三个预测值</span></span>
<span class="line"><span>                        [0.4, 0.1, 0.6],</span></span>
<span class="line"><span>                        [0.4, 0.1, 0.6]]]) # 样本3的三个预测值</span></span>
<span class="line"><span>print(predata.shape)</span></span>
<span class="line"><span>print(torch.sum(predata,dim=1).shape)</span></span>
<span class="line"><span>print(torch.sum(predata).shape)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>torch.Size([2, 4, 3])</span></span>
<span class="line"><span>torch.Size([2, 3])</span></span>
<span class="line"><span>torch.Size([])</span></span></code></pre></div><h4 id="x-t" tabindex="-1">X.t() <a class="header-anchor" href="#x-t" aria-label="Permalink to &quot;X.t()&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span>a=torch.tensor([[1,2,3,4],</span></span>
<span class="line"><span>            [5,6,7,8],</span></span>
<span class="line"><span>            [9,10,11,12]])  #定义一个（3，4）的数据</span></span>
<span class="line"><span>print(a.t())</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[ 1,  5,  9],</span></span>
<span class="line"><span>        [ 2,  6, 10],</span></span>
<span class="line"><span>        [ 3,  7, 11],</span></span>
<span class="line"><span>        [ 4,  8, 12]])</span></span></code></pre></div><h4 id="x-reshape-x-1" tabindex="-1">X.reshape(X) <a class="header-anchor" href="#x-reshape-x-1" aria-label="Permalink to &quot;X.reshape(X)&quot;">​</a></h4><ul><li><code>torch.reshape</code> 用来返回一个新的张量，形状改变为指定的形状。如果形状不兼容，PyTorch 会自动处理内存布局。<code>reshape</code> 方法总是会返回一个新的张量，无论输入张量是连续的还是非连续的。</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from torch import reshape,tensor</span></span>
<span class="line"><span>a=tensor([[[[1,2,3,4],</span></span>
<span class="line"><span>            [5,6,7,8],</span></span>
<span class="line"><span>            [9,10,11,12]],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            [[1,2,3,4],</span></span>
<span class="line"><span>            [5,6,7,8],</span></span>
<span class="line"><span>            [9,10,11,12]]]])  #定义一个（1，2，3，4）的数据</span></span>
<span class="line"><span>a.reshape(1,4,1,6)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[[[ 1,  2,  3,  4,  5,  6]],</span></span>
<span class="line"><span>         [[ 7,  8,  9, 10, 11, 12]],</span></span>
<span class="line"><span>         [[ 1,  2,  3,  4,  5,  6]],</span></span>
<span class="line"><span>         [[ 7,  8,  9, 10, 11, 12]]]])</span></span></code></pre></div><h4 id="x-view-x" tabindex="-1">X.view(X) <a class="header-anchor" href="#x-view-x" aria-label="Permalink to &quot;X.view(X)&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>from torch import reshape,tensor</span></span>
<span class="line"><span>a=tensor([[[[1,2,3,4],</span></span>
<span class="line"><span>            [5,6,7,8],</span></span>
<span class="line"><span>            [9,10,11,12]],</span></span>
<span class="line"><span></span></span>
<span class="line"><span>            [[1,2,3,4],</span></span>
<span class="line"><span>            [5,6,7,8],</span></span>
<span class="line"><span>            [9,10,11,12]]]])  #定义一个（1，2，3，4）的数据</span></span>
<span class="line"><span>print(a.view(4,6))</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[ 1,  2,  3,  4,  5,  6],</span></span>
<span class="line"><span>        [ 7,  8,  9, 10, 11, 12],</span></span>
<span class="line"><span>        [ 1,  2,  3,  4,  5,  6],</span></span>
<span class="line"><span>        [ 7,  8,  9, 10, 11, 12]])</span></span></code></pre></div><ul><li><p>连续张量 当对张量进行某些操作（如转置、切片、索引等）时，结果可能是非连续的。即使原始张量是连续的，经过这些操作后，得到的新张量可能在内存中并不是连续的。 例如，当你对张量进行转置时，PyTorch 会返回一个 非连续张量，即使在数学上转置后的形状是有效的。 如果你想对非连续张量使用 .view()，你必须先通过 .contiguous() 方法确保它是连续的。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span># 创建一个张量</span></span>
<span class="line"><span>x = torch.tensor([[1, 2], [3, 4]])</span></span>
<span class="line"><span>print(x.is_contiguous())  # 输出: True</span></span>
<span class="line"><span># 对张量进行转置，结果是非连续张量</span></span>
<span class="line"><span>y = x.t()  # \`t()\` 是转置操作</span></span>
<span class="line"><span>print(y.is_contiguous())  # 输出: False</span></span>
<span class="line"><span># 使用 .contiguous() 转换为连续张量</span></span>
<span class="line"><span>y_contiguous = y.contiguous()</span></span>
<span class="line"><span># 现在可以安全地使用 .view</span></span>
<span class="line"><span>y_reshaped = y_contiguous.view(2, 2)</span></span>
<span class="line"><span>print(y_reshaped)</span></span></code></pre></div></li></ul><h4 id="x-permute-x" tabindex="-1">X.permute(X) <a class="header-anchor" href="#x-permute-x" aria-label="Permalink to &quot;X.permute(X)&quot;">​</a></h4><p>该函数是进行维度移动，重排维度</p><p>例如形状为（2,3,4,5）变换成（3,2,5,4）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span>data=torch.randn(2,3,4,5)</span></span>
<span class="line"><span>print(data.shape)</span></span>
<span class="line"><span># 形状变换  #交换0,1维度（最高，次最高位）,交换2,3维度(次低位，最低位)</span></span>
<span class="line"><span>data_new=data.permute(1,0,3,2)</span></span>
<span class="line"><span>print(data_new.shape)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>torch.Size([2, 3, 4, 5])</span></span>
<span class="line"><span>torch.Size([3, 2, 5, 4])</span></span></code></pre></div><h4 id="x-long" tabindex="-1">X.long() <a class="header-anchor" href="#x-long" aria-label="Permalink to &quot;X.long()&quot;">​</a></h4><p><code>.long()</code> 是一个张量方法，用于将张量的数据类型转换为 <strong><code>torch.int64</code></strong>（即 64 位整数类型）</p><ul><li>是整数，用于去小数</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建一个浮点数张量</span></span>
<span class="line"><span>tensor = torch.tensor([1.2, 2.3, 3.4])</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 将浮点数张量转换为长整型张量</span></span>
<span class="line"><span>long_tensor = tensor.long()</span></span>
<span class="line"><span></span></span>
<span class="line"><span>print(long_tensor)  # 输出：tensor([1, 2, 3])</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([1, 2, 3])</span></span></code></pre></div><h4 id="x-item" tabindex="-1">X.item() <a class="header-anchor" href="#x-item" aria-label="Permalink to &quot;X.item()&quot;">​</a></h4><p><code>.item()</code> 返回一个 Python 原生的数据类型（如 <code>float</code>、<code>int</code> 等），它从一个只有单个元素的张量中提取该元素的值。如果张量中有多个元素，使用 <code>.item()</code> 会引发错误。</p><p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 创建一个浮点数张量</span></span>
<span class="line"><span>tensor = torch.tensor([2.3])</span></span>
<span class="line"><span>print(tensor.item())</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>2.299999952316284</span></span></code></pre></div><h2 id="randn-x" tabindex="-1">randn(X) <a class="header-anchor" href="#randn-x" aria-label="Permalink to &quot;randn(X)&quot;">​</a></h2><p>创建一个（2，3，4，5）的 torch 数组</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># 均方损失MseLoss</span></span>
<span class="line"><span>import torch</span></span>
<span class="line"><span>data=torch.randn(2,3,4,5)  #或者data=torch.randn([2,3,4,5])</span></span>
<span class="line"><span>print(data)</span></span></code></pre></div><p>输出：</p><img src="`+g+`" alt="image-20250121121717051" style="zoom:50%;"><p>比较</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>temp=torch.randn(10)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([-1.2891,  1.2495,  1.2514, -0.3571, -2.3269,  1.1780, -1.7351,  1.5985,</span></span>
<span class="line"><span>        -0.0320, -0.0367])</span></span></code></pre></div><p>比较</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>temp=torch.randn(1,10)</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([[-0.0276,  0.9589, -0.7749,  0.1158, -0.0168, -0.5705, -0.0094,  2.1249,</span></span>
<span class="line"><span>          0.3064,  0.2421]])</span></span></code></pre></div><h2 id="hsitc-x-x-x-x" tabindex="-1">hsitc(X,X,X,X) <a class="header-anchor" href="#hsitc-x-x-x-x" aria-label="Permalink to &quot;hsitc(X,X,X,X)&quot;">​</a></h2><p><code>torch.histc</code> 是 PyTorch 中用于计算张量（tensor）数据分布的一个函数，它可以生成一个张量的直方图。该函数会返回一个包含指定区间内数据分布的直方图张量。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>torch.histc(input, bins=100, min=0, max=1)</span></span></code></pre></div><p>桶宽</p>`,83)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",L,s[15]||(s[15]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"桶")]),a("g",{"data-mml-node":"mi",transform:"translate(1000,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"的")]),a("g",{"data-mml-node":"mi",transform:"translate(2000,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"宽")]),a("g",{"data-mml-node":"mi",transform:"translate(3000,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"度")]),a("g",{"data-mml-node":"mo",transform:"translate(4277.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mfrac",transform:"translate(5333.6,0)"},[a("g",{"data-mml-node":"mrow",transform:"translate(220,676)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45A",d:"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(878,0)"},[a("path",{"data-c":"1D44E",d:"M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1407,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2201.2,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(3201.4,0)"},[a("path",{"data-c":"1D45A",d:"M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(4079.4,0)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(4424.4,0)"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mrow",transform:"translate(1810.7,-686)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D44F",d:"M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(429,0)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(774,0)"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1374,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})])]),a("rect",{width:"5224.4",height:"60",x:"120",y:"220"})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[16]||(s[16]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",{mathvariant:"normal"},"桶"),a("mi",{mathvariant:"normal"},"的"),a("mi",{mathvariant:"normal"},"宽"),a("mi",{mathvariant:"normal"},"度"),a("mo",null,"="),a("mfrac",null,[a("mrow",null,[a("mi",null,"m"),a("mi",null,"a"),a("mi",null,"x"),a("mo",null,"−"),a("mi",null,"m"),a("mi",null,"i"),a("mi",null,"n")]),a("mrow",null,[a("mi",null,"b"),a("mi",null,"i"),a("mi",null,"n"),a("mi",null,"s")])])],-1)])),_:1,__:[16]})]),_:1}),s[49]||(s[49]=o(`<p>示例</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span># 创建一个包含随机数的张量</span></span>
<span class="line"><span>data = torch.randn(100)</span></span>
<span class="line"><span># 设置参数</span></span>
<span class="line"><span>min_value = -3</span></span>
<span class="line"><span>max_value = 3</span></span>
<span class="line"><span>bins =10</span></span>
<span class="line"><span># 计算数据的直方图，分成 10 个桶，数据区间为 -3 到 3</span></span>
<span class="line"><span>histogram = torch.histc(data, bins=bins, min=min_value,</span></span>
<span class="line"><span>max=max_value)</span></span>
<span class="line"><span>print(histogram)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#打印桶的范围</span></span>
<span class="line"><span># 计算每个桶的宽度</span></span>
<span class="line"><span>bin_width = (max_value - min_value) / bins</span></span>
<span class="line"><span># 打印每个桶的范围</span></span>
<span class="line"><span>bucket_ranges = [(min_value + i * bin_width, min_value + (i + 1) * bin_width) for i in range(bins)]</span></span>
<span class="line"><span># 打印结果</span></span>
<span class="line"><span>for i, (start, end) in enumerate(bucket_ranges):</span></span>
<span class="line"><span>    print(f&quot;桶 {i+1}: [{start}, {end})&quot;)</span></span></code></pre></div><h2 id="cat" tabindex="-1">cat() <a class="header-anchor" href="#cat" aria-label="Permalink to &quot;cat()&quot;">​</a></h2><p>向量连接</p><p>exp1</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>a1=torch.randn(3)</span></span>
<span class="line"><span>a2=torch.randn(4)</span></span>
<span class="line"><span>print(a1)</span></span>
<span class="line"><span>print(a2)</span></span>
<span class="line"><span>print(torch.cat([a1,a2]))</span></span></code></pre></div><p>输出</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([ 0.6208, -0.0760, -0.4030])</span></span>
<span class="line"><span>tensor([ 0.6336,  0.6729,  0.5137, -0.6282])</span></span>
<span class="line"><span>tensor([ 0.6208, -0.0760, -0.4030,  0.6336,  0.6729,  0.5137, -0.6282])</span></span></code></pre></div><p>exp2 （向量带 t()连接，不变结果）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>a1=torch.randn(3)</span></span>
<span class="line"><span>a2=torch.randn(4).t()</span></span>
<span class="line"><span>print(a1)</span></span>
<span class="line"><span>print(a2)</span></span>
<span class="line"><span>print(torch.cat([a1,a2]))</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>tensor([ 0.6208, -0.0760, -0.4030])</span></span>
<span class="line"><span>tensor([ 0.6336,  0.6729,  0.5137, -0.6282])</span></span>
<span class="line"><span>tensor([ 0.6208, -0.0760, -0.4030,  0.6336,  0.6729,  0.5137, -0.6282])</span></span></code></pre></div><h2 id="eq-lt-gt-le-ge" tabindex="-1">eq,lt,gt,le,ge <a class="header-anchor" href="#eq-lt-gt-le-ge" aria-label="Permalink to &quot;eq,lt,gt,le,ge&quot;">​</a></h2><h2 id="log" tabindex="-1">log() <a class="header-anchor" href="#log" aria-label="Permalink to &quot;log()&quot;">​</a></h2><p>计算自然对数</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span># 创建一个张量</span></span>
<span class="line"><span>tensor = torch.tensor([1.0, 2.0, 3.0, 4.0])</span></span>
<span class="line"><span># 计算自然对数</span></span>
<span class="line"><span>log_tensor = torch.log(tensor)</span></span>
<span class="line"><span>#输出tensor([0.0000, 0.6931, 1.0986, 1.3863])</span></span></code></pre></div><h2 id="pow-x-x" tabindex="-1">pow(X,X) ** <a class="header-anchor" href="#pow-x-x" aria-label="Permalink to &quot;pow(X,X) \\*\\*&quot;">​</a></h2><h2 id="optim" tabindex="-1">optim <a class="header-anchor" href="#optim" aria-label="Permalink to &quot;optim&quot;">​</a></h2><h3 id="adam" tabindex="-1">Adam <a class="header-anchor" href="#adam" aria-label="Permalink to &quot;Adam&quot;">​</a></h3><p>adam 优化器求解的都是无约束优化问题</p><ul><li>exp1:目标函数</li></ul>`,20)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",C,s[17]||(s[17]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"munderover",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"2211",d:"M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(148.2,-1087.9) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(345,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1123,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(509.9,1150) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D45B",d:"M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])])]),a("g",{"data-mml-node":"mo",transform:"translate(4677.6,0)"},[a("path",{"data-c":"5B",d:"M118 -250V750H255V710H158V-210H255V-250H118Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msubsup",transform:"translate(4955.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,413) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-247) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(6186.3,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(7186.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(8186.6,0)"},[a("path",{"data-c":"1D450",d:"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(8619.6,0)"},[a("path",{"data-c":"1D45C",d:"M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9104.6,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(9573.6,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(9962.6,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(10462.6,0)"},[a("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(11032.6,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(11931.5,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(12542.7,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(13542.9,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(14542.9,0)"},[a("path",{"data-c":"5D",d:"M22 710V750H159V-250H22V-210H119V710H22Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[18]||(s[18]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"n")])]),a("mo",{stretchy:"false"},"["),a("msubsup",null,[a("mi",null,"x"),a("mi",null,"i"),a("mn",null,"2")]),a("mo",null,"−"),a("mn",null,"10"),a("mi",null,"c"),a("mi",null,"o"),a("mi",null,"s"),a("mo",{stretchy:"false"},"("),a("mn",null,"2"),a("mi",null,"π"),a("msub",null,[a("mi",null,"x"),a("mi",null,"i")]),a("mo",{stretchy:"false"},")"),a("mo",null,"+"),a("mn",null,"10"),a("mo",{stretchy:"false"},"]")],-1)])),_:1,__:[18]})]),_:1}),a("p",null,[s[21]||(s[21]=r("的二维形式")),n(p,{class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},{default:t(()=>[(i(),e("svg",E,s[19]||(s[19]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D453",d:"M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(550,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(939,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(1511,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(2177.8,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"munderover",transform:"translate(3233.6,0)"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"2211",d:"M61 748Q64 750 489 750H913L954 640Q965 609 976 579T993 533T999 516H979L959 517Q936 579 886 621T777 682Q724 700 655 705T436 710H319Q183 710 183 709Q186 706 348 484T511 259Q517 250 513 244L490 216Q466 188 420 134T330 27L149 -187Q149 -188 362 -188Q388 -188 436 -188T506 -189Q679 -189 778 -162T936 -43Q946 -27 959 6H999L913 -249L489 -250Q65 -250 62 -248Q56 -246 56 -239Q56 -234 118 -161Q186 -81 245 -11L428 206Q428 207 242 462L57 717L56 728Q56 744 61 748Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(1089,477.1) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mn"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"TeXAtom",transform:"translate(1089,-285.4) scale(0.707)","data-mjx-texclass":"ORD"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(345,0)"},[a("path",{"data-c":"3D",d:"M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(1123,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])])]),a("g",{"data-mml-node":"mo",transform:"translate(5520.2,0)"},[a("path",{"data-c":"5B",d:"M118 -250V750H255V710H158V-210H255V-250H118Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msubsup",transform:"translate(5798.2,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(605,363) scale(0.707)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-284.4) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(7029,0)"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(8029.2,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9029.2,0)"},[a("path",{"data-c":"1D450",d:"M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9462.2,0)"},[a("path",{"data-c":"1D45C",d:"M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(9947.2,0)"},[a("path",{"data-c":"1D460",d:"M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(10416.2,0)"},[a("path",{"data-c":"28",d:"M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(10805.2,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(11305.2,0)"},[a("path",{"data-c":"1D70B",d:"M132 -11Q98 -11 98 22V33L111 61Q186 219 220 334L228 358H196Q158 358 142 355T103 336Q92 329 81 318T62 297T53 285Q51 284 38 284Q19 284 19 294Q19 300 38 329T93 391T164 429Q171 431 389 431Q549 431 553 430Q573 423 573 402Q573 371 541 360Q535 358 472 358H408L405 341Q393 269 393 222Q393 170 402 129T421 65T431 37Q431 20 417 5T381 -10Q370 -10 363 -7T347 17T331 77Q330 86 330 121Q330 170 339 226T357 318T367 358H269L268 354Q268 351 249 275T206 114T175 17Q164 -11 132 -11Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"msub",transform:"translate(11875.2,0)"},[a("g",{"data-mml-node":"mi"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(605,-150) scale(0.707)"},[a("path",{"data-c":"1D456",d:"M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z",style:{"stroke-width":"3"}})])]),a("g",{"data-mml-node":"mo",transform:"translate(12774.1,0)"},[a("path",{"data-c":"29",d:"M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(13385.4,0)"},[a("path",{"data-c":"2B",d:"M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(14385.6,0)"},[a("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}}),a("path",{"data-c":"30",d:"M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z",transform:"translate(500,0)",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(15385.6,0)"},[a("path",{"data-c":"5D",d:"M22 710V750H159V-250H22V-210H119V710H22Z",style:{"stroke-width":"3"}})])])],-1)]))),n(l,{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},{default:t(()=>s[20]||(s[20]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[a("mi",null,"f"),a("mo",{stretchy:"false"},"("),a("mi",null,"x"),a("mo",{stretchy:"false"},")"),a("mo",null,"="),a("munderover",null,[a("mo",{"data-mjx-texclass":"OP"},"∑"),a("mrow",{"data-mjx-texclass":"ORD"},[a("mi",null,"i"),a("mo",null,"="),a("mn",null,"1")]),a("mrow",{"data-mjx-texclass":"ORD"},[a("mn",null,"2")])]),a("mo",{stretchy:"false"},"["),a("msubsup",null,[a("mi",null,"x"),a("mi",null,"i"),a("mn",null,"2")]),a("mo",null,"−"),a("mn",null,"10"),a("mi",null,"c"),a("mi",null,"o"),a("mi",null,"s"),a("mo",{stretchy:"false"},"("),a("mn",null,"2"),a("mi",null,"π"),a("msub",null,[a("mi",null,"x"),a("mi",null,"i")]),a("mo",{stretchy:"false"},")"),a("mo",null,"+"),a("mn",null,"10"),a("mo",{stretchy:"false"},"]")],-1)])),_:1,__:[20]})]),_:1})]),s[50]||(s[50]=o(`<p>代码</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import torch</span></span>
<span class="line"><span>import torch.optim as optim</span></span>
<span class="line"><span>from tqdm import tqdm</span></span>
<span class="line"><span>import numpy as np</span></span>
<span class="line"><span>import matplotlib</span></span>
<span class="line"><span></span></span>
<span class="line"><span>matplotlib.use(&#39;TkAgg&#39;)  # 或者 &#39;Qt5Agg&#39;</span></span>
<span class="line"><span>import matplotlib.pyplot as plt</span></span>
<span class="line"><span></span></span>
<span class="line"><span>recorder = [[], [], []]  # 用于记录x, y, val</span></span>
<span class="line"><span></span></span>
<span class="line"><span># 目标函数</span></span>
<span class="line"><span>def f(x):</span></span>
<span class="line"><span>    fx = torch.sum(x ** 2 - 10 * torch.cos(2 * torch.pi * x) + 10)</span></span>
<span class="line"><span>    recorder[0].append(x[0].clone().detach().numpy())  # 记录x[0]（保留Tensor类型）</span></span>
<span class="line"><span>    recorder[1].append(x[1].clone().detach().numpy())  # 记录x[1]（保留Tensor类型）</span></span>
<span class="line"><span>    recorder[2].append(fx.clone().detach().numpy())  # 记录目标函数值（保留Tensor类型）</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 计算目标函数值（非Tensor）</span></span>
<span class="line"><span>def objf2_f(x, y):</span></span>
<span class="line"><span>    fx = x ** 2 - 10 * np.cos(2 * np.pi * x) + 10 + y ** 2 - 10 * np.cos(2 * np.pi * y) + 10</span></span>
<span class="line"><span>    return fx</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span># 计算损失（罚函数）</span></span>
<span class="line"><span>def penalty(x):</span></span>
<span class="line"><span>    f_vals = f(x)</span></span>
<span class="line"><span>    return f_vals</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>if __name__ == &quot;__main__&quot;:</span></span>
<span class="line"><span>    num_x = 2  # 决策变量个数</span></span>
<span class="line"><span>    # 初始化决策变量</span></span>
<span class="line"><span>    x = torch.tensor([-2.5,-2.5],requires_grad=True,dtype=torch.float32)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 优化器</span></span>
<span class="line"><span>    iters = 1000  # 迭代次数</span></span>
<span class="line"><span>    optimizer = optim.Adam([x], lr=0.01)</span></span>
<span class="line"><span>    processbar = tqdm(range(iters), desc=&quot;Adam优化&quot;, unit=&quot;批次&quot;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 训练过程</span></span>
<span class="line"><span>    for iter in processbar:</span></span>
<span class="line"><span>        # 清空梯度</span></span>
<span class="line"><span>        optimizer.zero_grad()</span></span>
<span class="line"><span>        f_vals = f(x)  # 目标函数值</span></span>
<span class="line"><span>        loss = penalty(x)  # 罚函数做目标函数</span></span>
<span class="line"><span>        loss.backward()  # 反向传播计算梯度</span></span>
<span class="line"><span>        optimizer.step()  # 参数更新</span></span>
<span class="line"><span></span></span>
<span class="line"><span>        # 损失显示</span></span>
<span class="line"><span>        processbar.set_postfix(loss=loss.item(), val=f_vals.item())</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 输出最终结果</span></span>
<span class="line"><span>    print(&quot;目标函数:&quot;, f(x).detach().numpy())  # 输出目标函数</span></span>
<span class="line"><span>    print(&quot;解:&quot;, x.detach().numpy())  # 输出优化结果</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 创建网格数据</span></span>
<span class="line"><span>    x_vals = np.arange(-4, 2, 0.01)</span></span>
<span class="line"><span>    y_vals = np.arange(-4, 2, 0.01)</span></span>
<span class="line"><span>    z = np.array([[objf2_f(x_vals[i], y_vals[j]) for i in range(len(x_vals))] for j in range(len(y_vals))])</span></span>
<span class="line"><span>    x_vals, y_vals = np.meshgrid(x_vals, y_vals)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 绘图</span></span>
<span class="line"><span>    fig = plt.figure(dpi=100)</span></span>
<span class="line"><span>    ax = fig.add_axes([0, 0, 1, 1], projection=&#39;3d&#39;)</span></span>
<span class="line"><span>    ax.plot_surface(x_vals, y_vals, z, cmap=&#39;viridis&#39;, alpha=0.1)</span></span>
<span class="line"><span>    ax.plot3D( recorder[0], recorder[1],</span></span>
<span class="line"><span>             recorder[2], &#39;r-&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 设置坐标轴标签</span></span>
<span class="line"><span>    ax.set_xlabel(&#39;X&#39;)</span></span>
<span class="line"><span>    ax.set_ylabel(&#39;Y&#39;)</span></span>
<span class="line"><span>    ax.set_zlabel(&#39;Z&#39;)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # 显示图形</span></span>
<span class="line"><span>    plt.show()</span></span></code></pre></div><p>绘图</p><img src="`+k+'" alt="image-20250124212317436" style="zoom:33%;"> $$ ',5)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",M,s[22]||(s[22]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mo"},[a("path",{"data-c":"2212",d:"M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(778,0)"},[a("path",{"data-c":"1D452",d:"M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1244,0)"},[a("path",{"data-c":"1D465",d:"M52 289Q59 331 106 386T222 442Q257 442 286 424T329 379Q371 442 430 442Q467 442 494 420T522 361Q522 332 508 314T481 292T458 288Q439 288 427 299T415 328Q415 374 465 391Q454 404 425 404Q412 404 406 402Q368 386 350 336Q290 115 290 78Q290 50 306 38T341 26Q378 26 414 59T463 140Q466 150 469 151T485 153H489Q504 153 504 145Q504 144 502 134Q486 77 440 33T333 -11Q263 -11 227 52Q186 -10 133 -10H127Q78 -10 57 16T35 71Q35 103 54 123T99 143Q142 143 142 101Q142 81 130 66T107 46T94 41L91 40Q91 39 97 36T113 29T132 26Q168 26 194 71Q203 87 217 139T245 247T261 313Q266 340 266 352Q266 380 251 392T217 404Q177 404 142 372T93 290Q91 281 88 280T72 278H58Q52 284 52 289Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(1816,0)"},[a("path",{"data-c":"1D45D",d:"M23 287Q24 290 25 295T30 317T40 348T55 381T75 411T101 433T134 442Q209 442 230 378L240 387Q302 442 358 442Q423 442 460 395T497 281Q497 173 421 82T249 -10Q227 -10 210 -4Q199 1 187 11T168 28L161 36Q160 35 139 -51T118 -138Q118 -144 126 -145T163 -148H188Q194 -155 194 -157T191 -175Q188 -187 185 -190T172 -194Q170 -194 161 -194T127 -193T65 -192Q-5 -192 -24 -194H-32Q-39 -187 -39 -183Q-37 -156 -26 -148H-6Q28 -147 33 -136Q36 -130 94 103T155 350Q156 355 156 364Q156 405 131 405Q109 405 94 377T71 316T59 280Q57 278 43 278H29Q23 284 23 287ZM178 102Q200 26 252 26Q282 26 310 49T356 107Q374 141 392 215T411 325V331Q411 405 350 405Q339 405 328 402T306 393T286 380T269 365T254 350T243 336T235 326L232 322Q232 321 229 308T218 264T204 212Q178 106 178 102Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mn",transform:"translate(2319,0)"},[a("path",{"data-c":"32",d:"M109 429Q82 429 66 447T50 491Q50 562 103 614T235 666Q326 666 387 610T449 465Q449 422 429 383T381 315T301 241Q265 210 201 149L142 93L218 92Q375 92 385 97Q392 99 409 186V189H449V186Q448 183 436 95T421 3V0H50V19V31Q50 38 56 46T86 81Q115 113 136 137Q145 147 170 174T204 211T233 244T261 278T284 308T305 340T320 369T333 401T340 431T343 464Q343 527 309 573T212 619Q179 619 154 602T119 569T109 550Q109 549 114 549Q132 549 151 535T170 489Q170 464 154 447T109 429Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mo",transform:"translate(3096.8,0)"},[a("path",{"data-c":"3A",d:"M78 370Q78 394 95 412T138 430Q162 430 180 414T199 371Q199 346 182 328T139 310T96 327T78 370ZM78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z",style:{"stroke-width":"3"}})]),a("g",{"data-mml-node":"mi",transform:"translate(3652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"未")]),a("g",{"data-mml-node":"mi",transform:"translate(4652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"解")]),a("g",{"data-mml-node":"mi",transform:"translate(5652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"决")]),a("g",{"data-mml-node":"mi",transform:"translate(6652.6,0)"},[a("text",{"data-variant":"italic",transform:"scale(1,-1)","font-size":"884px","font-family":"serif","font-style":"italic"},"（")]),a("g",{"data-mml-node":"mi",transform:"translate(7652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"带")]),a("g",{"data-mml-node":"mi",transform:"translate(8652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"约")]),a("g",{"data-mml-node":"mi",transform:"translate(9652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"束")]),a("g",{"data-mml-node":"mi",transform:"translate(10652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"无")]),a("g",{"data-mml-node":"mi",transform:"translate(11652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"法")]),a("g",{"data-mml-node":"mi",transform:"translate(12652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"生")]),a("g",{"data-mml-node":"mi",transform:"translate(13652.6,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"效")]),a("g",{"data-mml-node":"mi",transform:"translate(14652.6,0)"},[a("text",{"data-variant":"italic",transform:"scale(1,-1)","font-size":"884px","font-family":"serif","font-style":"italic"},"）")])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[23]||(s[23]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mo",null,"−"),a("mi",null,"e"),a("mi",null,"x"),a("mi",null,"p"),a("mn",null,"2"),a("mo",null,":"),a("mi",{mathvariant:"normal"},"未"),a("mi",{mathvariant:"normal"},"解"),a("mi",{mathvariant:"normal"},"决"),a("mi",null,"（"),a("mi",{mathvariant:"normal"},"带"),a("mi",{mathvariant:"normal"},"约"),a("mi",{mathvariant:"normal"},"束"),a("mi",{mathvariant:"normal"},"无"),a("mi",{mathvariant:"normal"},"法"),a("mi",{mathvariant:"normal"},"生"),a("mi",{mathvariant:"normal"},"效"),a("mi",null,"）")],-1)])),_:1,__:[23]})]),_:1}),s[51]||(s[51]=a("p",null,"min \\sum_{i=1}^{10}x_i^2",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",V,s[24]||(s[24]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"约")]),a("g",{"data-mml-node":"mi",transform:"translate(1000,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"束")])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[25]||(s[25]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",{mathvariant:"normal"},"约"),a("mi",{mathvariant:"normal"},"束")],-1)])),_:1,__:[25]})]),_:1}),s[52]||(s[52]=a("p",null,"x_0^2+x_1^2<=1\\ x_2^2+x_3^2<=1\\ x_0^4+x_5^2<=1\\ x_0^6+x_7^2<=1\\ x_8^2+x_9^2<=1\\ x_0+x_1=1\\ x_2=x_3",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",q,s[26]||(s[26]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"2118600",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"},'代码 ``` # 最优化，所有函数只能返回一个Tensor参数，不能返回其他 import torch import torch.optim as optim from tqdm import tqdm def f(x): #目标函数 fx=torch.sum(x**2) return fx def neqc(x): #不等式约束 neqcx=torch.tensor([ [x[0]**2 + x[1]**2 - 1], #每个约束都要有[] [x[2]**2 + x[3]**2 - 1], [x[4]**2 + x[5]**2 - 1], [x[6]**2 + x[7]**2 - 1], [x[8]**2 + x[9]**2 - 1], ]) return neqcx def eqc(x): #等式约束 eqcx=torch.tensor([ [x[0] + x[1] - 1], [x[2] - x[3]] ]) return eqcx def penalty(x,num_neq,lambda_vals): #根据x、和拉格朗日项(lambda_vals)计算罚函数 f_vals=f(x) neq_penalty=torch.sum(lambda_vals[:num_neq]*torch.relu(neqc(x))) eq_penalty=torch.sum(lambda_vals[num_neq:]*torch.abs(eqc(x))) return f_vals+neq_penalty+eq_penalty def update_lambda(lambda_vals,alpha=0.1): #根据损失(x计算)更新拉格朗日乘子（梯度上升） # 更新拉格朗日乘子：对于违反不等式约束的部分，增加乘子的值 lambda_vals=lambda_vals+alpha*torch.cat([torch.relu(neqc(x)),eqc(x)]) #不能用+=,避免原地修改 return lambda_vals if __name__=="__main__": # 初始化决策变量 x=torch.randn(10,requires_grad=True) lambda_vals=torch.zeros(7,requires_grad=True) num_neq=5 #不等式约束的个数,剩下的都是等式约束 #优化器 iters=2000 #迭代次数 optimizer=optim.Adam([x,lambda_vals],lr=0.001) processbar=tqdm(range(iters),desc="Adam优化",unit="批次") #训练 for iter in processbar: #清空梯度 optimizer.zero_grad() f_vals=f(x) #目标函数值 loss=penalty(x,num_neq=num_neq,lambda_vals=lambda_vals) #罚函数做目标函数 loss.backward() #反向传播计算梯度 lambda_vals=update_lambda(lambda_vals) optimizer.step() #参数更新 # 损失显示 processbar.set_postfix(loss=loss.item(),val=f_vals.item()) # 输出最终结果 print("目标函数:", f(x).detach().numpy()) print("解:", x.detach().numpy()) ``` 输出 ``` Adam优化: 100%|██████████| 2000/2000 [00:06<00:00, 303.84批次/s, loss=-1.24e+3, val=0.0692] 目标函数: 0.06900671 解: [ 3.0376939e-02 -9.4526002e-12 -2.7419755e-03 2.4194285e-01 2.5643762e-43 9.3386642e-04 -5.2020042e-03 9.3502715e-02 2.7738018e-02 2.6624671e-43] Adam优化: 100%|██████████| 100/100 [00:00<00:00, 2195.74批次/s, loss=-0.925, val=0.73] ``` ## nn ``` import torch.nn as nn ``` ### Module ``` class GrowthNet(nn.Module): def __init__(self,inc,num_classes=100): super(GrowthNet, self).__init__() self.aapool=nn.AdaptiveAvgPool2d((1,1)) self.fc1 = nn.Linear(16, num_classes) # 假设输入图像大小为32x32 def forward(self, x): x=self.aapool(x) x = x.view(-1, 16) # 展平操作 x = self.fc1(x) return x ``` #### load/load_state_dict ``` torch.save(model.state_dict(), "model_weights.pth") torch.save(model, "model.pth") ``` ``` model.load_state_dict(torch.load("model_weights.pth")) model.to(device) # OR, load the full model model = torch.load("model.pth") model.to(device) ``` ### Sequential([X,X,X]) 定义 ``` self.pre_layer = nn.Sequential( nn.Conv2d(3, 10, kernel_size=3, stride=1), # 10*10*3 # nn.BatchNorm2d(10), nn.PReLU(), nn.MaxPool2d(kernel_size=2, stride=2,padding=0), # 5*5*10 nn.Conv2d(10, 16, kernel_size=3, stride=1), # 3*3*16 # nn.BatchNorm2d(16), nn.PReLU(), nn.Conv2d(16, 32, kernel_size=3, stride=1), # 1*1*32 # nn.BatchNorm2d(32), nn.PReLU() ) ``` 使用 ``` x = self.pre_layer(x) ``` ### Conv2d 形状 ')])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[27]||(s[27]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null,'代码 ``` # 最优化，所有函数只能返回一个Tensor参数，不能返回其他 import torch import torch.optim as optim from tqdm import tqdm def f(x): #目标函数 fx=torch.sum(x**2) return fx def neqc(x): #不等式约束 neqcx=torch.tensor([ [x[0]**2 + x[1]**2 - 1], #每个约束都要有[] [x[2]**2 + x[3]**2 - 1], [x[4]**2 + x[5]**2 - 1], [x[6]**2 + x[7]**2 - 1], [x[8]**2 + x[9]**2 - 1], ]) return neqcx def eqc(x): #等式约束 eqcx=torch.tensor([ [x[0] + x[1] - 1], [x[2] - x[3]] ]) return eqcx def penalty(x,num_neq,lambda_vals): #根据x、和拉格朗日项(lambda_vals)计算罚函数 f_vals=f(x) neq_penalty=torch.sum(lambda_vals[:num_neq]*torch.relu(neqc(x))) eq_penalty=torch.sum(lambda_vals[num_neq:]*torch.abs(eqc(x))) return f_vals+neq_penalty+eq_penalty def update_lambda(lambda_vals,alpha=0.1): #根据损失(x计算)更新拉格朗日乘子（梯度上升） # 更新拉格朗日乘子：对于违反不等式约束的部分，增加乘子的值 lambda_vals=lambda_vals+alpha*torch.cat([torch.relu(neqc(x)),eqc(x)]) #不能用+=,避免原地修改 return lambda_vals if __name__=="__main__": # 初始化决策变量 x=torch.randn(10,requires_grad=True) lambda_vals=torch.zeros(7,requires_grad=True) num_neq=5 #不等式约束的个数,剩下的都是等式约束 #优化器 iters=2000 #迭代次数 optimizer=optim.Adam([x,lambda_vals],lr=0.001) processbar=tqdm(range(iters),desc="Adam优化",unit="批次") #训练 for iter in processbar: #清空梯度 optimizer.zero_grad() f_vals=f(x) #目标函数值 loss=penalty(x,num_neq=num_neq,lambda_vals=lambda_vals) #罚函数做目标函数 loss.backward() #反向传播计算梯度 lambda_vals=update_lambda(lambda_vals) optimizer.step() #参数更新 # 损失显示 processbar.set_postfix(loss=loss.item(),val=f_vals.item()) # 输出最终结果 print("目标函数:", f(x).detach().numpy()) print("解:", x.detach().numpy()) ``` 输出 ``` Adam优化: 100%|██████████| 2000/2000 [00:06<00:00, 303.84批次/s, loss=-1.24e+3, val=0.0692] 目标函数: 0.06900671 解: [ 3.0376939e-02 -9.4526002e-12 -2.7419755e-03 2.4194285e-01 2.5643762e-43 9.3386642e-04 -5.2020042e-03 9.3502715e-02 2.7738018e-02 2.6624671e-43] Adam优化: 100%|██████████| 100/100 [00:00<00:00, 2195.74批次/s, loss=-0.925, val=0.73] ``` ## nn ``` import torch.nn as nn ``` ### Module ``` class GrowthNet(nn.Module): def __init__(self,inc,num_classes=100): super(GrowthNet, self).__init__() self.aapool=nn.AdaptiveAvgPool2d((1,1)) self.fc1 = nn.Linear(16, num_classes) # 假设输入图像大小为32x32 def forward(self, x): x=self.aapool(x) x = x.view(-1, 16) # 展平操作 x = self.fc1(x) return x ``` #### load/load_state_dict ``` torch.save(model.state_dict(), "model_weights.pth") torch.save(model, "model.pth") ``` ``` model.load_state_dict(torch.load("model_weights.pth")) model.to(device) # OR, load the full model model = torch.load("model.pth") model.to(device) ``` ### Sequential([X,X,X]) 定义 ``` self.pre_layer = nn.Sequential( nn.Conv2d(3, 10, kernel_size=3, stride=1), # 10*10*3 # nn.BatchNorm2d(10), nn.PReLU(), nn.MaxPool2d(kernel_size=2, stride=2,padding=0), # 5*5*10 nn.Conv2d(10, 16, kernel_size=3, stride=1), # 3*3*16 # nn.BatchNorm2d(16), nn.PReLU(), nn.Conv2d(16, 32, kernel_size=3, stride=1), # 1*1*32 # nn.BatchNorm2d(32), nn.PReLU() ) ``` 使用 ``` x = self.pre_layer(x) ``` ### Conv2d 形状 ')])],-1)])),_:1,__:[27]})]),_:1}),s[53]||(s[53]=a("p",null,"H'=1+\\lfloor \\frac{H-K+P}{S} \\rfloor",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",Z,s[28]||(s[28]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"})],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[29]||(s[29]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},null,-1)])),_:1,__:[29]})]),_:1}),s[54]||(s[54]=a("p",null,"W'=1+\\lfloor \\frac{W-K+P}{S} \\rfloor",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",D,s[30]||(s[30]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"mi"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"索")]),a("g",{"data-mml-node":"mi",transform:"translate(1000,0)"},[a("text",{"data-variant":"normal",transform:"scale(1,-1)","font-size":"884px","font-family":"serif"},"引")])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[31]||(s[31]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("mi",{mathvariant:"normal"},"索"),a("mi",{mathvariant:"normal"},"引")],-1)])),_:1,__:[31]})]),_:1}),s[55]||(s[55]=a("p",{bmatrix:""},[r("(H'"),a("em",{n:""},"{m},W'"),r(")\\overset{Conv}{\\leftarrow}\\begin{bmatrix}(H'"),a("em",{n:""},"{m}*S,W'"),r("*S) & \\dots &(H'_{m}*S,W'"),a("em",{m:""},"{n}*S+K) \\ \\dots & \\dots & \\dots \\ (H'"),r("*S+K,W'_{n}*S) & \\dots &(H'"),a("em",{n:""},"{m}*S+K,W'"),r("*S+K) \\end")],-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",z,s[32]||(s[32]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"310800",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"}," ``` nn.Conv2d(3, 10, kernel_size=3, stride=1) ``` ### BatchNorm2d(X) ### LeakyReLU(X) 要输入小于0是的斜率 ### MaxPool2d 定义 ``` self.max_pool=nn.MaxPool2d(kernel_size=2, stride=2,padding=0) ``` 用法 ``` output_tensor = self.max_pool(input_tensor) ``` ### AdaptiveAvgPool2d(X) 自适应池化，自动填充，以达到池化后输出长宽形状为X ``` import torch import torch.nn as nn pool=nn.AdaptiveAvgPool2d((7,7)) data=torch.randn(5,3,2,1) out1=pool(data) print(out1.shape) ``` 输出 ``` torch.Size([5, 3, 7, 7]) ``` ### ReLU() ")])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[33]||(s[33]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null," ``` nn.Conv2d(3, 10, kernel_size=3, stride=1) ``` ### BatchNorm2d(X) ### LeakyReLU(X) 要输入小于0是的斜率 ### MaxPool2d 定义 ``` self.max_pool=nn.MaxPool2d(kernel_size=2, stride=2,padding=0) ``` 用法 ``` output_tensor = self.max_pool(input_tensor) ``` ### AdaptiveAvgPool2d(X) 自适应池化，自动填充，以达到池化后输出长宽形状为X ``` import torch import torch.nn as nn pool=nn.AdaptiveAvgPool2d((7,7)) data=torch.randn(5,3,2,1) out1=pool(data) print(out1.shape) ``` 输出 ``` torch.Size([5, 3, 7, 7]) ``` ### ReLU() ")])],-1)])),_:1,__:[33]})]),_:1}),s[56]||(s[56]=a("p",null,"f(x)=max(0,x)",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",F,s[34]||(s[34]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"9000",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"}," ### PReLU() ")])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[35]||(s[35]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null," ### PReLU() ")])],-1)])),_:1,__:[35]})]),_:1}),s[57]||(s[57]=a("p",{cases:""},"f(x)=\\begin{cases}x & \\text{if } x>0 \\ a \\cdot x & \\text{if } x \\leq 0\\end",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",X,s[36]||(s[36]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"367200",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"}," - 当输入值大于 0 时，PReLU 和标准的 ReLU 一样，直接返回输入值。 - 当输入值小于等于 0 时，PReLU 会通过学习的参数 `a` 来调整负值的斜率。 - 这个参数 `a` 可以在训练过程中进行更新，因此，PReLU 使得模型能够更好地拟合数据，尤其是在负值的部分。 ``` #way1 nn.PReLU() ``` ``` #way2 nn.PReLU(num_parameters=1, init=0.25) ``` - `num_parameters`: 参数的数量，通常是 1（表示每个通道一个参数）或者与输入的维度相同（例如，如果输入是 2D 卷积图像特征图，可以为每个通道设置一个参数）。默认值是 1。 - `init`: 初始化参数的值，默认值是 0.25。这个值决定了初始时负值的斜率。 ### BCELoss() nn.BCELoss()是二进制交叉熵损失（Binary Cross-Entropy Loss），简称 BCELoss。它通常用于二分类问题或多标签二分类问题。 ")])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[37]||(s[37]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null," - 当输入值大于 0 时，PReLU 和标准的 ReLU 一样，直接返回输入值。 - 当输入值小于等于 0 时，PReLU 会通过学习的参数 `a` 来调整负值的斜率。 - 这个参数 `a` 可以在训练过程中进行更新，因此，PReLU 使得模型能够更好地拟合数据，尤其是在负值的部分。 ``` #way1 nn.PReLU() ``` ``` #way2 nn.PReLU(num_parameters=1, init=0.25) ``` - `num_parameters`: 参数的数量，通常是 1（表示每个通道一个参数）或者与输入的维度相同（例如，如果输入是 2D 卷积图像特征图，可以为每个通道设置一个参数）。默认值是 1。 - `init`: 初始化参数的值，默认值是 0.25。这个值决定了初始时负值的斜率。 ### BCELoss() nn.BCELoss()是二进制交叉熵损失（Binary Cross-Entropy Loss），简称 BCELoss。它通常用于二分类问题或多标签二分类问题。 ")])],-1)])),_:1,__:[37]})]),_:1}),s[58]||(s[58]=a("p",null,"L=-\\frac{1}{N}\\sum_{i=1}^{N}[y_i\\cdot log(\\hat{y_i})+(1-y_i)\\cdot log(1-\\hat{y_i})]",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",B,s[38]||(s[38]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"1038600",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"},'定义 ``` self.cls_loss_fn = nn.BCELoss() ``` 使用 ``` cls_loss = self.cls_loss_fn(output_category, category)#置信度损失 ``` exp - BCELoss 二进制交叉熵损失(向量) ``` # BCELoss 二进制交叉熵损失(向量) import torch.nn as nn predata=torch.tensor([0.1, 0.9, 0.2, 0.8, 0.7, 0.3]) truedata=torch.tensor([0,1,0,1,1,0], dtype=torch.float32) calbceloss=nn.BCELoss() print("-BCELoss is-",calbceloss(predata,truedata)) ``` - BCELoss 二进制交叉熵损失(矩阵) 假设我们有一个批量数据，其中每个样本有多个类别的二分类问题。这样，`predata` 和 `truedata` 就会是二维张量。 更高维度的 `predata` 和 `truedata`，并通过 `BCELoss` 计算它们的损失。`BCELoss` 会对每个元素的二进制交叉熵损失进行独立计算，并返回每个元素的损失的平均值。 一行一个样本（一列一个指标） ``` # BCELoss 二进制交叉熵损失(矩阵) # 假设模型输出（logits），每个样本有多个类别的预测值 predata = torch.tensor([[0.1, 0.9, 0.2], # 样本1的三个预测值 [0.8, 0.7, 0.3], # 样本2的三个预测值 [0.4, 0.2, 0.6]]) # 样本3的三个预测值 # 对应的真实标签，真实标签也是二维的，每个样本的每个类别的标签 truedata = torch.tensor([[0, 1, 0], # 样本1的真实标签 [1, 1, 0], # 样本2的真实标签 [0, 0, 1]], # 样本3的真实标签 dtype=torch.float32) calbceloss=nn.BCELoss() print("calbceloss(predata,truedata) \'s BCELoss is-",calbceloss(predata,truedata)) ``` - 函数实现 ``` #手动实现 def calBCE(predata,truedata): N=predata.shape[0] #先归一化概率 # predata=predata/torch.sum(predata) print(predata) bceloss=-1/N*torch.sum(truedata*torch.log(predata)+(1-truedata)*torch.log(1-predata)) return bceloss print("-BCELoss is-",calBCE(predata,truedata)) ``` 输出 ``` -BCELoss is- tensor(0.2284) ``` 注意，predata可以概率化后再输出 ### MSELoss() 均方误差损失 ')])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[39]||(s[39]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null,'定义 ``` self.cls_loss_fn = nn.BCELoss() ``` 使用 ``` cls_loss = self.cls_loss_fn(output_category, category)#置信度损失 ``` exp - BCELoss 二进制交叉熵损失(向量) ``` # BCELoss 二进制交叉熵损失(向量) import torch.nn as nn predata=torch.tensor([0.1, 0.9, 0.2, 0.8, 0.7, 0.3]) truedata=torch.tensor([0,1,0,1,1,0], dtype=torch.float32) calbceloss=nn.BCELoss() print("-BCELoss is-",calbceloss(predata,truedata)) ``` - BCELoss 二进制交叉熵损失(矩阵) 假设我们有一个批量数据，其中每个样本有多个类别的二分类问题。这样，`predata` 和 `truedata` 就会是二维张量。 更高维度的 `predata` 和 `truedata`，并通过 `BCELoss` 计算它们的损失。`BCELoss` 会对每个元素的二进制交叉熵损失进行独立计算，并返回每个元素的损失的平均值。 一行一个样本（一列一个指标） ``` # BCELoss 二进制交叉熵损失(矩阵) # 假设模型输出（logits），每个样本有多个类别的预测值 predata = torch.tensor([[0.1, 0.9, 0.2], # 样本1的三个预测值 [0.8, 0.7, 0.3], # 样本2的三个预测值 [0.4, 0.2, 0.6]]) # 样本3的三个预测值 # 对应的真实标签，真实标签也是二维的，每个样本的每个类别的标签 truedata = torch.tensor([[0, 1, 0], # 样本1的真实标签 [1, 1, 0], # 样本2的真实标签 [0, 0, 1]], # 样本3的真实标签 dtype=torch.float32) calbceloss=nn.BCELoss() print("calbceloss(predata,truedata) \'s BCELoss is-",calbceloss(predata,truedata)) ``` - 函数实现 ``` #手动实现 def calBCE(predata,truedata): N=predata.shape[0] #先归一化概率 # predata=predata/torch.sum(predata) print(predata) bceloss=-1/N*torch.sum(truedata*torch.log(predata)+(1-truedata)*torch.log(1-predata)) return bceloss print("-BCELoss is-",calBCE(predata,truedata)) ``` 输出 ``` -BCELoss is- tensor(0.2284) ``` 注意，predata可以概率化后再输出 ### MSELoss() 均方误差损失 ')])],-1)])),_:1,__:[39]})]),_:1}),s[59]||(s[59]=a("p",null,"MSE(y,\\hat y)=\\frac{1}{N} \\sum_{i=1}^{N}(y_i-\\hat y_i)^2",-1)),n(p,{class:"MathJax",jax:"SVG",display:"true",style:{direction:"ltr",display:"block","text-align":"center",margin:"1em 0",position:"relative"}},{default:t(()=>[(i(),e("svg",A,s[40]||(s[40]=[a("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[a("g",{"data-mml-node":"math"},[a("g",{"data-mml-node":"merror","data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("rect",{"data-background":"true",width:"14613600",height:"950",y:"-200",style:{fill:"yellow",stroke:"none"}}),a("title",null,"You can't use 'macro parameter character #' in math mode"),a("g",{"data-mml-node":"mtext",style:{fill:"red",stroke:"red","font-family":"serif"}},[a("text",{"data-variant":"-explicitFont",transform:"scale(1,-1)","font-size":"884px"},' ``` import torch import torch.nn as nn # 真实值 (labels) y = torch.tensor([3.0, -0.5, 2.0, 7.0]) # 预测值 (predictions) y_pred = torch.tensor([2.5, 0.0, 2.0, 8.0]) # 使用 MSELoss 计算损失 mse_loss = nn.MSELoss() loss = mse_loss(y_pred, y) print("MSE Loss:", loss.item()) ``` ### Parameter(X) `nn.Parameter` 用于将张量转换为模型的参数，确保该张量可以在训练过程中进行自动求导和优化。 ``` import torch import torch.nn as nn # 创建一个 nn.Parameter param = nn.Parameter(torch.randn(3, 3)) # 将它作为模型的一部分 class MyModel(nn.Module): def __init__(self): super(MyModel, self).__init__() self.my_param = nn.Parameter(torch.randn(3, 3), requires_grad=True) # 使其成为可训练参数 def forward(self, x): return x + self.my_param # 使用自定义参数进行运算 # 创建模型并打印 model = MyModel() print(model) ``` ### functional #### normalize(X,X) ``` torch.nn.functional.normalize(input, p=2, dim=None, eps=1e-12, out=None) ``` 1. **`input`**：输入张量，通常是一个多维张量（例如，形状为 `[batch_size, feature_dim]`）。 2. **`p`** (可选)：标量，表示范数的类型。默认值是 `2`，意味着进行 L2 范数标准化。也可以选择 `p=1` 来进行 L1 范数标准化。L2 范数就是计算每个向量元素的平方和再开根号，L1 范数是计算每个向量元素的绝对值和。 3. **`dim`** (可选)：指定沿着哪个维度进行标准化。通常，在机器学习中，我们会沿着特征维度进行标准化。对于 2D 输入，`dim=1` 通常用于对每一行（每个样本的特征）进行标准化；`dim=0` 用于对每一列（每个特征）进行标准化。 4. **`eps`** (可选)：为了避免除零错误，指定一个非常小的数值以防止标准化时出现除以零的情况。默认值是 `1e-12`。 5. **`out`** (可选)：用于存放结果的输出张量。如果给定了该参数，结果会被存储到它中。 示例 ``` import torch import torch.nn.functional as F # 创建一个 2D 张量（例如，一个 batch of 2D 特征向量） input_tensor = torch.tensor([[3.0, 4.0], [1.0, 2.0]]) # 对输入张量进行 L2 标准化（每一行单独标准化） normalized_tensor = F.normalize(input_tensor, p=2, dim=1) print(normalized_tensor) ``` 输出 ``` tensor([[0.6000, 0.8000], [0.4472, 0.8944]]) ``` #### interpolate(X,X,X) 用于上采样 ``` torch.nn.functional.interpolate(input, size=None, scale_factor=None, mode=\'nearest\', align_corners=None) ``` 1. **input** (`Tensor`): 输入的张量，通常是一个 4D 张量，形状为 `(N, C, H, W)`，其中 `N` 是批量大小，`C` 是通道数，`H` 和 `W` 是图像的高度和宽度。 2. **size** (`int` 或 `tuple` 或 `None`): 输出的目标尺寸，指定目标图像的大小。如果 `size` 为 `None`，则必须提供 `scale_factor`。 3. **scale_factor** (`float` 或 `tuple` 或 `None`): 缩放因子，用于调整输入的尺寸。如果提供了 `scale_factor`，则输入的每个维度会乘以该因子。与 `size` 互斥，只能提供其中一个。 4. **mode** (`str`): 指定插值方法。常见的模式包括： - `\'nearest\'`：最近邻插值。 - `\'linear\'`：线性插值（通常用于 3D 数据或视频）。 - `\'bilinear\'`：双线性插值（常用于 2D 图像）。 - `\'bicubic\'`：立方插值（用于 2D 图像）。 - `\'trilinear\'`：三线性插值（用于 3D 数据）。 5. **align_corners** (`bool` 或 `None`): 仅在 `mode` 是 `\'bilinear\'` 或 `\'bicubic\'` 时使用。若为 `True`，则对输入图像和目标图像的角点进行对齐。若为 `False`，则不对齐。默认值为 `None`，表示使用 PyTorch 的默认行为（通常是对齐角点）。 示例 使用size ``` import torch import torch.nn.functional as F # 假设输入是一个 1x1x4x4 的张量（1 个样本，1 个通道，4x4 的图像） input_tensor = torch.randn(2, 1, 2, 2) # 使用双线性插值将图像放大为 8x8 output_tensor = F.interpolate(input_tensor, size=(4,4), mode=\'bilinear\') print(input_tensor) print(output_tensor) # 输出: torch.Size([2, 1, 4,4]) ``` 输出 ``` tensor([[[[-1.0672, 0.3810], [ 0.0268, 1.2190]]], [[[ 0.6784, -0.0329], [ 1.5050, -0.2383]]]]) tensor([[[[-1.0672, -0.7051, 0.0190, 0.3810], [-0.7937, -0.4476, 0.2445, 0.5905], [-0.2467, 0.0674, 0.6955, 1.0095], [ 0.0268, 0.3249, 0.9210, 1.2190]]], [[[ 0.6784, 0.5006, 0.1449, -0.0329], [ 0.8851, 0.6428, 0.1581, -0.0842], [ 1.2984, 0.9270, 0.1844, -0.1870], [ 1.5050, 1.0692, 0.1975, -0.2383]]]]) ``` 使用scale_factor ``` import torch import torch.nn.functional as F # 假设输入是一个 1x1x4x4 的张量（1 个样本，1 个通道，4x4 的图像） input_tensor = torch.randn(2, 1, 2, 2) # 使用双线性插值将图像放大为 8x8 output_tensor = F.interpolate(input_tensor, scale_factor=2, mode=\'bilinear\') print(input_tensor) print(output_tensor) # 输出: torch.Size([2, 1, 4,4]) ``` 输出 ``` tensor([[[[-0.4952, 0.7631], [ 1.5991, 0.4327]]], [[[-0.1891, 0.0338], [-0.5376, 1.0497]]]]) tensor([[[[-0.4952, -0.1806, 0.4485, 0.7631], [ 0.0284, 0.1914, 0.5175, 0.6805], [ 1.0755, 0.9355, 0.6553, 0.5153], [ 1.5991, 1.3075, 0.7243, 0.4327]]], [[[-0.1891, -0.1334, -0.0219, 0.0338], [-0.2762, -0.1352, 0.1468, 0.2878], [-0.4504, -0.1389, 0.4842, 0.7957], [-0.5376, -0.1408, 0.6529, 1.0497]]]]) ``` #### conv2d() 示例1 ``` import torch import torch.nn.functional as F # 假设我们有一个输入张量，大小为 (1, 1, 5, 5)，即一个批次，1个通道，5x5的图像 input_tensor = torch.randn(1, 1, 5, 5) # 随机生成一个输入图像 # 定义卷积核，大小为 (1, 1, 3, 3)，即一个卷积核，1个输入通道，大小为3x3 weight = torch.randn(1, 1, 3, 3) # 随机生成一个卷积核 # 偏置项（可选），如果需要的话 bias = torch.randn(1) # 使用 nn.functional.conv2d 进行卷积操作 output_tensor = F.conv2d(input_tensor, weight, bias, stride=1, padding=1) print("输入张量的形状:", input_tensor.shape) print("卷积核的形状:", weight.shape) print("输出张量的形状:", output_tensor.shape) ``` 输出 ``` 输入张量的形状: torch.Size([1, 1, 5, 5]) 卷积核的形状: torch.Size([1, 1, 3, 3]) 输出张量的形状: torch.Size([1, 1, 5, 5]) ``` 分组卷积 ``` import torch import torch.nn.functional as F # 假设 input_tensor 是一个大小为 (1, 3, 5, 5) 的张量 input_tensor = torch.zeros(1, 3, 5, 5) # (batch_size=1, in_channels=3, height=5, width=5) # 修改卷积核的形状为 (3, 1, 3, 3)，表示 3 个输出通道，每个分组 1 个输入通道 weight = torch.randn(3, 1, 3, 3) # (out_channels=3, in_channels_per_group=1, kernel_height=3, kernel_width=3) # 使用分组卷积 (groups=3) output_tensor = F.conv2d(input_tensor, weight, groups=3) print("输入张量的形状:", input_tensor.shape) print("卷积核的形状:", weight.shape) print("输出张量的形状:", output_tensor.shape) ``` 假设输入张量 X*X* 的形状是 (1,3,5,5)(1,3,5,5)，卷积核 W*W* 的形状是 (3,1,3,3)(3,1,3,3)，`groups=3`，则分组卷积的过程如下： 1. **输入分组**： - 输入张量 X*X* 被分成 3 组，每组 1 个通道： - 组 1：X[:,0:1,:,:]*X*[:,0:1,:,:] - 组 2：X[:,1:2,:,:]*X*[:,1:2,:,:] - 组 3：X[:,2:3,:,:]*X*[:,2:3,:,:] 2. **卷积核分组**： - 卷积核 W*W* 被分成 3 组，每组 1 个卷积核： - 组 1：W[0:1,:,:,:]*W*[0:1,:,:,:] - 组 2：W[1:2,:,:,:]*W*[1:2,:,:,:] - 组 3：W[2:3,:,:,:]*W*[2:3,:,:,:] 3. **分组卷积**： - 组 1 的输入与组 1 的卷积核进行卷积，生成第 1 个输出通道。 - 组 2 的输入与组 2 的卷积核进行卷积，生成第 2 个输出通道。 - 组 3 的输入与组 3 的卷积核进行卷积，生成第 3 个输出通道。 4. **输出拼接**： - 将 3 个输出通道拼接起来，得到最终的输出张量 Y*Y*，形状为 (1,3,3,3)(1,3,3,3)。\' 输出 ``` 输入张量的形状: torch.Size([1, 3, 5, 5]) 卷积核的形状: torch.Size([3, 1, 3, 3]) 输出张量的形状: torch.Size([1, 3, 3, 3]) ``` ## utils ### data #### Dataset ``` from torch.utils.data import Dataset ``` ``` class Data_RandGen(): def __init__(self,datanum=1000,val_test_ratio=0.15,batch_size=5,num_timestamp=10,num_nodes=50,feature_dim=3): #数据格式 self.datanum=datanum self.val_test_ratio=val_test_ratio self.batch_size=batch_size #相关系数矩阵形状[num_nodes,num_nodes] upper_triangle =torch.tensor(np.random.rand(num_nodes,num_nodes)) #随机生成一个0-1矩阵 self.correlation_matrix = np.triu(upper_triangle) + np.triu(upper_triangle, 1).T #生成一个相关系数矩阵 for i in range(num_nodes): self.correlation_matrix[i,i]/=2 #特征矩阵【batch_size,时间 步长,节点数，节点特征维度】 self.feature_matrix = torch.randn([datanum,num_timestamp,num_nodes,feature_dim]) #生成特征矩阵 # 预测矩阵【batch_size,时间 步长=1,节点数，节点特征维度】，预测下一个时间 self.label_matrix=torch.rand([datanum,1,num_nodes,feature_dim]) def data_gen(self): print(self.correlation_matrix.shape) print(self.feature_matrix.shape) test_size=self.val_test_ratio*self.datanum x_train, x_test,y_train, y_test = model_selection.train_test_split(self.feature_matrix, self.label_matrix, test_size=int(test_size), random_state=42) return self.correlation_matrix,x_train, x_test,y_train, y_test #数据集 class PCBDataset(Dataset): def __init__(self,data,label): #自己随机产生数据来模拟 self.data=data self.label=label def __len__(self): return len(self.data) def __getitem__(self,index): return self.data[index],self.label[index] ``` ``` datarandgenerator=Data_RandGen() correlation_matrix,x_train, x_test,y_train, y_test=datarandgenerator.data_gen() train_dataset = PCBDataset(x_train, y_train) test_dataset = PCBDataset(x_test, y_test) ``` ## softmax(X,dim) 对于4维的torch数组shape为（0维，1维，2维，3维） ``` import torch import torch.nn as nn x = torch.randn(2,2,2,2) print(x) softmax_output = torch.softmax(x, 0) print("0维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 1) print("1维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 2) print("2维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 3) print("3维度",softmax_output,softmax_output.shape,sep="\\n") ``` 输出 ``` tensor([[[[ 1.3436, -0.6011], [-0.0820, 0.2757]], [[-0.1782, -0.8730], [-0.7761, -0.2443]]], [[[ 0.8724, -0.6155], [ 0.4941, -0.6893]], [[ 0.0416, -1.2847], [-0.2367, -2.0729]]]]) 0维度 tensor([[[[0.6157, 0.5036], [0.3598, 0.7241]], [[0.4453, 0.6015], [0.3683, 0.8616]]], [[[0.3843, 0.4964], [0.6402, 0.2759]], [[0.5547, 0.3985], [0.6317, 0.1384]]]]) torch.Size([2, 2, 2, 2]) 1维度 tensor([[[[0.8208, 0.5676], [0.6669, 0.6272]], [[0.1792, 0.4324], [0.3331, 0.3728]]], [[[0.6965, 0.6613], [0.6750, 0.7996]], [[0.3035, 0.3387], [0.3250, 0.2004]]]]) torch.Size([2, 2, 2, 2]) 2维度 tensor([[[[0.8062, 0.2938], [0.1938, 0.7062]], [[0.6452, 0.3478], [0.3548, 0.6522]]], [[[0.5935, 0.5185], [0.4065, 0.4815]], [[0.5691, 0.6874], [0.4309, 0.3126]]]]) torch.Size([2, 2, 2, 2]) 3维度 tensor([[[[0.8749, 0.1251], [0.4115, 0.5885]], [[0.6670, 0.3330], [0.3701, 0.6299]]], [[[0.8158, 0.1842], [0.7656, 0.2344]], [[0.7902, 0.2098], [0.8625, 0.1375]]]]) torch.Size([2, 2, 2, 2]) ``` ## masked_select(X,X ) 掩码取值 ``` import torch a = torch.tensor([1,2,3,4,5]) print(a<4) print(torch.lt(a,4)) #lt gt eq le ge print(a[a<4]) print(torch.masked_select(a, a<4)) print(torch.nonzero(a<4)) ``` 输出 ``` tensor([ True, True, True, False, False]) tensor([ True, True, True, False, False]) tensor([1, 2, 3]) tensor([1, 2, 3]) tensor([[0], [1], [2]]) ``` ## nonzero(X) 取非0元素的索引 ## dist(X,X) ``` torch.dist(word, w) 计算词 word 和词向量 w 之间的欧几里得距离。 ``` ## index_select(X) 可以根据给定的索引，从一个张量中选择指定维度上的特定元素。 (0维，1维，...) ``` torch.index_select(input, dim, index) ``` 示例1 torch矩阵选择第[0,2,1,3,2,2]行，并进行堆叠 ``` import torch # 创建一个 4x3 的张量 tensor = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) index=torch.tensor([0,2,1,3,2,2]) selected_tensor=torch.index_select(tensor,dim=0,index=index) print(selected_tensor) ``` 输出 ``` tensor([[ 1, 2, 3], [ 7, 8, 9], [ 4, 5, 6], [10, 11, 12], [ 7, 8, 9], [ 7, 8, 9]]) ``` 示例2对象方法调用 ``` import torch # 创建一个 4x3 的张量 tensor = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) index=torch.tensor([0,2,1,3,2,2]) selected_tensor=tensor.index_select(dim=0,index=index) print(selected_tensor) ``` 输出与上方一致 ## device() ``` device = torch.device(\'cuda\') ``` # torchvision ## transforms ### Compose([X,X,X]) 用于组合多个图像转换操作。其目的是将多个转换步骤按顺序应用到图像上，从而一次性完成多个预处理操作。 定义： ``` self.__image_transform = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) ]) ``` 使用： ``` img_data = self.__image_transform(img) ``` ### ToTensor() 这个转换操作将输入的图像从 PIL 图像或 NumPy 数组转换为 PyTorch 的张量（tensor）。转换后的张量会有以下特点： 1. 图像的像素值会被标准化到 [0, 1] 的范围。 对于彩色图像，转换后的形状是 (C, H, W)，其中 C 是颜色通道数（如 RGB 为 3），H 是图像高度，W 是图像宽度 。 ``` image = transforms.ToTensor()(pimg.open(r"testpic1.jpg")) ``` ``` from PIL import Image import torch import torchvision.transforms as transforms # 打开图像 img = Image.open(r"testpic1.jpg") # 将图像转换为张量 transform = transforms.ToTensor() img_tensor = transform(img) # 现在 img_tensor 是一个 PyTorch 张量 print(img_tensor.shape) # 打印张量形状，通常是 (C, H, W) ``` ### Normalize(mean, std) ``` transforms.Normalize(mean, std) ``` 每个通道的每个像素值减去对应的均值 mean，并除以对应的标准差 std。 这有助于让模型对不同图像的亮度和对比度的变化更加鲁棒，通常是为了加速训练和提高模型性能。 处理一个 RGB 图像，并且希望对其进行标准化，使得每个通道的像素值具有指定的均值和标准差 ``` import torch from torchvision import transforms from PIL import Image # 加载图像 image = Image.open(\'example_image.jpg\') # 定义标准化的转换操作 transform = transforms.Compose([ transforms.ToTensor(), # 转换图像为 Tensor transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) # 标准化 ]) # 对图像应用转换 normalized_image = transform(image) # 输出标准化后的图像数据 print(normalized_image) ``` # torchaudio ## load(X) ``` import torchaudio #读入语音 filename=r"0_0_0_0_1_1_1_1.wav" waveform,sample_rate=torchaudio.load(filename) print(waveform,"\\n",sample_rate) ``` 输出 ``` tensor([[ 3.0518e-05, 6.1035e-05, 3.0518e-05, ..., -1.8616e-03, -2.2583e-03, -1.3733e-03]]) 8000 ``` # tqdm ``` pip install tqdm ``` ## tqdm 添加进度条 原始： ``` # for i, (img_data_, category_, offset_) in enumerate(train_dataloader): ``` ``` for i, (img_data_, category_, offset_) in enumerate(tqdm(validate_dataloader, desc="验证数据加载", unit="批次")): ``` 完整使用方法 ``` #tqdm from tqdm import tqdm iters=100 processbar=tqdm(range(iters),desc="Adam优化",unit="批次") for iter in processbar: loss=torch.randn(1) f_vals=torch.randn(1) # 损失显示 processbar.set_postfix(loss=loss.item(),val=f_vals.item()) ``` 输出 Adam优化: 100%|██████████| 100/100 [00:00<00:00, 2195.74批次/s, loss=-0.925, val=0.73] # math ## modf(X) # sklearn ``` pip install scikit-learn ``` # PIL ## Image ``` from PIL import Image ``` ### open(X) 打开图像并读取图像的大小 ``` Image.open(image_file) ``` ``` with Image.open(image_file) as img: img_w, img_h = img.size ``` ### fromarray(X,X) ``` PIL.Image.fromarray(obj, mode=None) ``` - **`obj`**：这是一个 `numpy` 数组，通常是一个多维数组，表示图像的数据。 - 对于灰度图像，数组的形状通常是 `(height, width)`，即二维数组。 - 对于 RGB 图像，数组的形状通常是 `(height, width, 3)`，表示每个像素有 3 个通道（红色、绿色和蓝色）。 - 对于 RGBA 图像，数组的形状通常是 `(height, width, 4)`，表示每个像素有 4 个通道（红色、绿色、蓝色和透明度通道）。 - **`mode`**：这是一个可选的参数，用于指定输出图像的模式。常见的图像模式包括： - `\'1\'`：1 位像素（黑白图像） - `\'L\'`：8 位像素，灰度图（每个像素是一个 0-255 之间的灰度值） - `\'RGB\'`：每个像素由红色、绿色和蓝色三种颜色通道组成 - `\'RGBA\'`：每个像素由红色、绿色、蓝色和透明度四个通道组成 - `\'CMYK\'`：每个像素由青色、品红色、黄色和黑色四个通道组成 示例 ``` import numpy as np from PIL import Image # 创建一个 100x100 的 RGB 图像（随机的红、绿、蓝通道值） array = np.random.randint(0, 256, (100, 100, 3), dtype=np.uint8) # 从 NumPy 数组创建 RGB 图像 img = Image.fromarray(array, mode=\'RGB\') # 显示图像 img.show() # 保存图像 img.save("rgb_image.png") ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250211215519335.png" alt="image-20250211215519335" style="zoom: 25%;" /> 原始格式不匹配的使用astype(\'uint8\')转换 ``` img = Image.fromarray(res.astype(\'uint8\'), mode=\'RGBA\') ``` ### new(X,X,X) 用于创建一张新的图像。这个方法可以用来生成空白的图像，也可以用来创建一个特定颜色的背景图像。 ``` PIL.Image.new(mode, size, color=0) ``` 1. **mode**：图像的色彩模式，定义了图像每个像素的颜色数据的结构。常见的模式有： - `\'1\'`：1位像素（黑白二值图像） - `\'L\'`：8位像素（灰度图像） - `\'RGB\'`：24位像素（红、绿、蓝三色通道的彩色图像） - `\'RGBA\'`：32位像素（包括红、绿、蓝通道和透明度通道） - `\'CMYK\'`：每个像素有四个通道：青色（Cyan）、洋红色（Magenta）、黄色（Yellow）、黑色（Key） - `\'P\'`：调色板模式（用于每个像素用一个索引表示色彩） - `\'I\'`：32位整型像素 - `\'F\'`：32位浮动小数型像素 2. **size**：图像的大小，通常是一个元组 `(width, height)`，表示图像的宽度和高度。 3. **color**：可选，填充颜色。如果你创建的图像是空白的，或者你希望用特定颜色填充整个图像，这个参数就很有用。它的默认值为 `0`（黑色）。对于 `\'RGB\'` 模式，`color` 参数通常是一个元组，表示 RGB 颜色值，如 `(255, 255, 255)` 表示白色；对于 `\'L\'` 模式，`color` 是一个灰度值（例如 `128` 表示灰色）。 示例 ``` from PIL import Image # 创建一个 200x200 的黑色背景图像 img = Image.new("RGB", (200, 200), (0, 0, 0)) img.show() # 显示图像 ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250212003440182.png" alt="image-20250212003440182" style="zoom:25%;" /> 示例2 ``` from PIL import Image # 创建一个 150x150 的半透明背景图像（RGBA模式） img = Image.new("RGBA", (150, 150), (255, 0, 0, 128)) # 红色半透明 img.show() # 显示图像 ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250212003503036.png" alt="image-20250212003503036" style="zoom: 33%;" /> ### 返回值： - 返回一个新的 `Image` 对象，表示创建的图像。 ### 类方法 #### X.size 获取图片长宽 ``` w1, h1 = img.size ``` #### crop(X) 图像裁剪，X是一个包含四个元素的元组 `(left, upper, right, lower)`，定义了裁剪区域 ``` img.crop(crop_box) ``` ``` from PIL import Image img = Image.open("image.jpg") crop_box = (100, 100, 400, 400) # 裁剪区域的左、上、右、下坐标 face_crop = img.crop(crop_box) face_crop.show() # 显示裁剪后的图像 ``` #### resize(X) ``` resized =Image.resize(size, resample=0) ``` size：一个包含两个整数的元组 (width, height)，表示目标图像的宽度和高度。 resample：可选参数，指定调整大小时使用的重采样算法。常用的值包括： Image.NEAREST：最邻近算法（最快，但图像可能不平滑）。 Image.BILINEAR：双线性插值（更平滑的效果）。 Image.BICUBIC：立方插值（效果最好，但计算量较大）。 Image.LANCZOS：高质量下采样。 #### X.show(X) 显示图片 #### X.save(X) 保存图片 #### X.thumbnail(X) 用于修改图像的大小，同时保持其纵横比。这个方法会原地修改图像（即改变原图），并不会返回一个新的图像对象 - **(width, height)**：一个元组，指定缩略图的最大宽度和高度。图像会根据这个尺寸进行缩放，同时保持原始图像的纵横比。如果图像的宽高比不同于提供的宽高比，图像的缩略图会在保证宽度或高度不超过限制的情况下进行缩放，另外一个维度会自适应。 示例 ``` from PIL import Image # 打开图像 image = Image.open(\'1.jpg\') # 设置最大宽度和高度 max_size = (150, 150) # 创建缩略图 image.thumbnail(max_size) print(np.array(image).shape) # 保存为新的文件 image.save(\'example_thumbnail.jpg\') ``` 输出 ``` (123, 150, 3) ``` # sum() 可对单层列表求和，返回1个数，否则报错 # time ## 类方法 ### time() 使用time计算一段代码的执行时间 粗计时 ``` import time # 记录开始时间 start_time = time.time() # 需要测量执行时间的代码 for i in range(1000000): pass # 示例代码：循环一百万次 # 记录结束时间 end_time = time.time() # 计算执行时间 execution_time = end_time - start_time print(f"代码执行时间: {execution_time} 秒") ``` 精计时 ``` import time # 记录开始时间 start_time = time.perf_counter() # 需要测量执行时间的代码 for i in range(1000000): pass # 示例代码：循环一百万次 # 记录结束时间 end_time = time.perf_counter() # 计算执行时间 execution_time = end_time - start_time print(f"代码执行时间: {execution_time} 秒") ``` # random ``` import random ``` ## random.uniform(X) 返回的值是区间 `[a, b]` 中的一个随机浮点数 ``` random.uniform(a, b) ``` ## random.choice(X) 从列表中随机选择一个元素 ``` my_list = [1, 2, 3, 4, 5] random_element = random.choice(my_list) print(random_element) # 输出：1，2，3，4，或5（随机） ``` 从字符串中随机选择一个字符 ``` my_string = "hello" random_char = random.choice(my_string) print(random_char) # 输出：\'h\'，\'e\'，\'l\'，\'o\' 中的一个字符 ``` ## random.randint 生成一个 1 到 10 之间的随机整数 ``` random_int = random.randint(1, 10) print(random_int) # 输出：1，2，3，4，5，6，7，8，9，或10（随机） ``` # cv2 # open() ``` file = open("file_path", "w") ``` ## write() ``` file.write(string) ``` write() 1. 仅接受一个字符串作为参数 2. 不会自动添加换行符。如果你需要换行，需要手动添加 \\n ``` positive_anno_file.write("Hello, world!\\n") # 写入一行文本并换行 ``` # format() format() 是 Python 中的字符串方法，用于将指定的值插入到字符串中的占位符 {} 中。它可以接收多个参数并按顺序插入到对应的位置。 exp1:f ``` "string {0} and {1}".format(value1, value2) ``` exp2: ``` print("最优自变量{0:.4f},最优目标函数{1:.4f}".format(xOpt,objf(xOpt))) ``` # os ## path ### exists(X) ``` if os.path.exists("X"): pass ``` ## makedirs(X) ``` os.makedirs("./param") ``` # tensorflow ## V1 ``` pip uninstall tensorflow pip install tensorflow==1.15 -i https://pypi.tuna.tsinghua.edu.cn/simple ``` ### placeholder(X) ### Variable(X) ### global_variables_initializer(X) ### 类方法 ## V2 # torchtext ``` pip install torchtext -i https://pypi.tuna.tsinghua.edu.cn/simple ``` ``` import torchtext ``` ## vocab ### GloVe(X) 建立词表 ``` gv = torchtext.vocab.GloVe(name="6B", dim=50) ``` - `torchtext.vocab.GloVe` 是用于加载 GloVe 预训练词向量的函数。 - `name="6B"` 表示加载 "GloVe 6B" 预训练模型。这个模型是基于 6 亿词的语料库进行训练的。 - `dim=50` 表示每个词的词向量将被表示为 50 维的向量。 #### 类方法 #### 类变量 #### stoi 根据word获取索引 `gv.stoi[word]` 是将词 `word` 转换为它在词汇表中的索引。 ##### vectors 该函数返回给定词 `word` 的词向量，是一个矩阵，每一行对应一个词的词向量 ``` def get_wv(word): return gv.vectors[gv.stoi[word]] ``` - `gv.stoi[word]` 是将词 `word` 转换为它在词汇表中的索引。 - `gv.vectors` 是一个矩阵，每一行对应一个词的词向量。`gv.vectors[gv.stoi[word]]` 获取该词的词向量。 - 该函数返回给定词 `word` 的词向量。 ##### itos 根据索引 `i` 获取词汇表中的词。 ``` gv.itos[i] ``` ## dist # moviepy ``` pip install moviepy ``` ## > 报错ModuleNotFoundError: No module named \'moviepy.editor\' > > 改为 > > ``` > from moviepy import VideoFileClip, AudioFileClip > ``` # argparse 使用双引号 ``` #参数 import argparse parser=argparse.ArgumentParser(description="SGCN_Module") #训练参数 parser.add_argument("--epochs",default=300,type=int,metavar="N",help="迭代次数")#迭代次数 parser.add_argument("--outputdict", default={}, type=dict,metavar="N",help="输出数据") #模型参数 parser.add_argument("--num_nodes", default={}, type=dict,metavar="N",help="节点个数") parser.add_argument("--in_channels", default={}, type=dict,metavar="N",help="节点特征数") parser.add_argument("--batch_size", default=5, type=int,metavar="N",help="批大小") parser.add_argument("--timesteps", default={}, type=dict,metavar="N",help="输入时间序列长度") parser.add_argument("--predictsteps", default={}, type=dict,metavar="N",help="输出数据") args = parser.parse_args() if __name__=="__main__": # 打印解析后的参数 print("Epochs:", args.epochs) print("Output dict:", args.outputdict) print("Number of nodes:", args.num_nodes) print("Input channels:", args.in_channels) print("Batch size:", args.batch_size) print("Timesteps:", args.timesteps) print("Predict steps:", args.predictsteps) ``` # 环境 工作文件夹 安装torch、cuda、cudnn、cudatoolkit ``` activate aiclass_torch_3p11 ``` 不破坏安装 ``` pip install torchaudio --no-deps ``` > import cv2 > ModuleNotFoundError: No module named \'cv2\' > > ``` > pip install opencv-python > ``` > 查看cuda能否使用 > > ``` > import torch > > # 检查是否有可用的 CUDA 设备 > print(torch.cuda.is_available()) > > # 输出当前 CUDA 设备的信息 > if torch.cuda.is_available(): > print(f"CUDA Device Name: {torch.cuda.get_device_name(0)}") > print(f"CUDA Device Memory: {torch.cuda.get_device_properties(0).total_memory}") > else: > print("CUDA is not available.") > ``` > conda新建环境安装路径修改 > > ``` > envs_dirs: > - D://Anaconda//envs > ``` > CondaValueError: You have chosen a non-default solver backend (libmamba) but it was not recognized. Choose one of: classic > > ``` > conda config --set solver classic > ``` **** ')])])])],-1)]))),n(l,{unselectable:"on",display:"block",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",overflow:"hidden",width:"100%"}},{default:t(()=>s[41]||(s[41]=[a("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[a("merror",{"data-mjx-error":"You can't use 'macro parameter character #' in math mode",title:"You can't use 'macro parameter character #' in math mode"},[a("mtext",null,' ``` import torch import torch.nn as nn # 真实值 (labels) y = torch.tensor([3.0, -0.5, 2.0, 7.0]) # 预测值 (predictions) y_pred = torch.tensor([2.5, 0.0, 2.0, 8.0]) # 使用 MSELoss 计算损失 mse_loss = nn.MSELoss() loss = mse_loss(y_pred, y) print("MSE Loss:", loss.item()) ``` ### Parameter(X) `nn.Parameter` 用于将张量转换为模型的参数，确保该张量可以在训练过程中进行自动求导和优化。 ``` import torch import torch.nn as nn # 创建一个 nn.Parameter param = nn.Parameter(torch.randn(3, 3)) # 将它作为模型的一部分 class MyModel(nn.Module): def __init__(self): super(MyModel, self).__init__() self.my_param = nn.Parameter(torch.randn(3, 3), requires_grad=True) # 使其成为可训练参数 def forward(self, x): return x + self.my_param # 使用自定义参数进行运算 # 创建模型并打印 model = MyModel() print(model) ``` ### functional #### normalize(X,X) ``` torch.nn.functional.normalize(input, p=2, dim=None, eps=1e-12, out=None) ``` 1. **`input`**：输入张量，通常是一个多维张量（例如，形状为 `[batch_size, feature_dim]`）。 2. **`p`** (可选)：标量，表示范数的类型。默认值是 `2`，意味着进行 L2 范数标准化。也可以选择 `p=1` 来进行 L1 范数标准化。L2 范数就是计算每个向量元素的平方和再开根号，L1 范数是计算每个向量元素的绝对值和。 3. **`dim`** (可选)：指定沿着哪个维度进行标准化。通常，在机器学习中，我们会沿着特征维度进行标准化。对于 2D 输入，`dim=1` 通常用于对每一行（每个样本的特征）进行标准化；`dim=0` 用于对每一列（每个特征）进行标准化。 4. **`eps`** (可选)：为了避免除零错误，指定一个非常小的数值以防止标准化时出现除以零的情况。默认值是 `1e-12`。 5. **`out`** (可选)：用于存放结果的输出张量。如果给定了该参数，结果会被存储到它中。 示例 ``` import torch import torch.nn.functional as F # 创建一个 2D 张量（例如，一个 batch of 2D 特征向量） input_tensor = torch.tensor([[3.0, 4.0], [1.0, 2.0]]) # 对输入张量进行 L2 标准化（每一行单独标准化） normalized_tensor = F.normalize(input_tensor, p=2, dim=1) print(normalized_tensor) ``` 输出 ``` tensor([[0.6000, 0.8000], [0.4472, 0.8944]]) ``` #### interpolate(X,X,X) 用于上采样 ``` torch.nn.functional.interpolate(input, size=None, scale_factor=None, mode=\'nearest\', align_corners=None) ``` 1. **input** (`Tensor`): 输入的张量，通常是一个 4D 张量，形状为 `(N, C, H, W)`，其中 `N` 是批量大小，`C` 是通道数，`H` 和 `W` 是图像的高度和宽度。 2. **size** (`int` 或 `tuple` 或 `None`): 输出的目标尺寸，指定目标图像的大小。如果 `size` 为 `None`，则必须提供 `scale_factor`。 3. **scale_factor** (`float` 或 `tuple` 或 `None`): 缩放因子，用于调整输入的尺寸。如果提供了 `scale_factor`，则输入的每个维度会乘以该因子。与 `size` 互斥，只能提供其中一个。 4. **mode** (`str`): 指定插值方法。常见的模式包括： - `\'nearest\'`：最近邻插值。 - `\'linear\'`：线性插值（通常用于 3D 数据或视频）。 - `\'bilinear\'`：双线性插值（常用于 2D 图像）。 - `\'bicubic\'`：立方插值（用于 2D 图像）。 - `\'trilinear\'`：三线性插值（用于 3D 数据）。 5. **align_corners** (`bool` 或 `None`): 仅在 `mode` 是 `\'bilinear\'` 或 `\'bicubic\'` 时使用。若为 `True`，则对输入图像和目标图像的角点进行对齐。若为 `False`，则不对齐。默认值为 `None`，表示使用 PyTorch 的默认行为（通常是对齐角点）。 示例 使用size ``` import torch import torch.nn.functional as F # 假设输入是一个 1x1x4x4 的张量（1 个样本，1 个通道，4x4 的图像） input_tensor = torch.randn(2, 1, 2, 2) # 使用双线性插值将图像放大为 8x8 output_tensor = F.interpolate(input_tensor, size=(4,4), mode=\'bilinear\') print(input_tensor) print(output_tensor) # 输出: torch.Size([2, 1, 4,4]) ``` 输出 ``` tensor([[[[-1.0672, 0.3810], [ 0.0268, 1.2190]]], [[[ 0.6784, -0.0329], [ 1.5050, -0.2383]]]]) tensor([[[[-1.0672, -0.7051, 0.0190, 0.3810], [-0.7937, -0.4476, 0.2445, 0.5905], [-0.2467, 0.0674, 0.6955, 1.0095], [ 0.0268, 0.3249, 0.9210, 1.2190]]], [[[ 0.6784, 0.5006, 0.1449, -0.0329], [ 0.8851, 0.6428, 0.1581, -0.0842], [ 1.2984, 0.9270, 0.1844, -0.1870], [ 1.5050, 1.0692, 0.1975, -0.2383]]]]) ``` 使用scale_factor ``` import torch import torch.nn.functional as F # 假设输入是一个 1x1x4x4 的张量（1 个样本，1 个通道，4x4 的图像） input_tensor = torch.randn(2, 1, 2, 2) # 使用双线性插值将图像放大为 8x8 output_tensor = F.interpolate(input_tensor, scale_factor=2, mode=\'bilinear\') print(input_tensor) print(output_tensor) # 输出: torch.Size([2, 1, 4,4]) ``` 输出 ``` tensor([[[[-0.4952, 0.7631], [ 1.5991, 0.4327]]], [[[-0.1891, 0.0338], [-0.5376, 1.0497]]]]) tensor([[[[-0.4952, -0.1806, 0.4485, 0.7631], [ 0.0284, 0.1914, 0.5175, 0.6805], [ 1.0755, 0.9355, 0.6553, 0.5153], [ 1.5991, 1.3075, 0.7243, 0.4327]]], [[[-0.1891, -0.1334, -0.0219, 0.0338], [-0.2762, -0.1352, 0.1468, 0.2878], [-0.4504, -0.1389, 0.4842, 0.7957], [-0.5376, -0.1408, 0.6529, 1.0497]]]]) ``` #### conv2d() 示例1 ``` import torch import torch.nn.functional as F # 假设我们有一个输入张量，大小为 (1, 1, 5, 5)，即一个批次，1个通道，5x5的图像 input_tensor = torch.randn(1, 1, 5, 5) # 随机生成一个输入图像 # 定义卷积核，大小为 (1, 1, 3, 3)，即一个卷积核，1个输入通道，大小为3x3 weight = torch.randn(1, 1, 3, 3) # 随机生成一个卷积核 # 偏置项（可选），如果需要的话 bias = torch.randn(1) # 使用 nn.functional.conv2d 进行卷积操作 output_tensor = F.conv2d(input_tensor, weight, bias, stride=1, padding=1) print("输入张量的形状:", input_tensor.shape) print("卷积核的形状:", weight.shape) print("输出张量的形状:", output_tensor.shape) ``` 输出 ``` 输入张量的形状: torch.Size([1, 1, 5, 5]) 卷积核的形状: torch.Size([1, 1, 3, 3]) 输出张量的形状: torch.Size([1, 1, 5, 5]) ``` 分组卷积 ``` import torch import torch.nn.functional as F # 假设 input_tensor 是一个大小为 (1, 3, 5, 5) 的张量 input_tensor = torch.zeros(1, 3, 5, 5) # (batch_size=1, in_channels=3, height=5, width=5) # 修改卷积核的形状为 (3, 1, 3, 3)，表示 3 个输出通道，每个分组 1 个输入通道 weight = torch.randn(3, 1, 3, 3) # (out_channels=3, in_channels_per_group=1, kernel_height=3, kernel_width=3) # 使用分组卷积 (groups=3) output_tensor = F.conv2d(input_tensor, weight, groups=3) print("输入张量的形状:", input_tensor.shape) print("卷积核的形状:", weight.shape) print("输出张量的形状:", output_tensor.shape) ``` 假设输入张量 X*X* 的形状是 (1,3,5,5)(1,3,5,5)，卷积核 W*W* 的形状是 (3,1,3,3)(3,1,3,3)，`groups=3`，则分组卷积的过程如下： 1. **输入分组**： - 输入张量 X*X* 被分成 3 组，每组 1 个通道： - 组 1：X[:,0:1,:,:]*X*[:,0:1,:,:] - 组 2：X[:,1:2,:,:]*X*[:,1:2,:,:] - 组 3：X[:,2:3,:,:]*X*[:,2:3,:,:] 2. **卷积核分组**： - 卷积核 W*W* 被分成 3 组，每组 1 个卷积核： - 组 1：W[0:1,:,:,:]*W*[0:1,:,:,:] - 组 2：W[1:2,:,:,:]*W*[1:2,:,:,:] - 组 3：W[2:3,:,:,:]*W*[2:3,:,:,:] 3. **分组卷积**： - 组 1 的输入与组 1 的卷积核进行卷积，生成第 1 个输出通道。 - 组 2 的输入与组 2 的卷积核进行卷积，生成第 2 个输出通道。 - 组 3 的输入与组 3 的卷积核进行卷积，生成第 3 个输出通道。 4. **输出拼接**： - 将 3 个输出通道拼接起来，得到最终的输出张量 Y*Y*，形状为 (1,3,3,3)(1,3,3,3)。\' 输出 ``` 输入张量的形状: torch.Size([1, 3, 5, 5]) 卷积核的形状: torch.Size([3, 1, 3, 3]) 输出张量的形状: torch.Size([1, 3, 3, 3]) ``` ## utils ### data #### Dataset ``` from torch.utils.data import Dataset ``` ``` class Data_RandGen(): def __init__(self,datanum=1000,val_test_ratio=0.15,batch_size=5,num_timestamp=10,num_nodes=50,feature_dim=3): #数据格式 self.datanum=datanum self.val_test_ratio=val_test_ratio self.batch_size=batch_size #相关系数矩阵形状[num_nodes,num_nodes] upper_triangle =torch.tensor(np.random.rand(num_nodes,num_nodes)) #随机生成一个0-1矩阵 self.correlation_matrix = np.triu(upper_triangle) + np.triu(upper_triangle, 1).T #生成一个相关系数矩阵 for i in range(num_nodes): self.correlation_matrix[i,i]/=2 #特征矩阵【batch_size,时间 步长,节点数，节点特征维度】 self.feature_matrix = torch.randn([datanum,num_timestamp,num_nodes,feature_dim]) #生成特征矩阵 # 预测矩阵【batch_size,时间 步长=1,节点数，节点特征维度】，预测下一个时间 self.label_matrix=torch.rand([datanum,1,num_nodes,feature_dim]) def data_gen(self): print(self.correlation_matrix.shape) print(self.feature_matrix.shape) test_size=self.val_test_ratio*self.datanum x_train, x_test,y_train, y_test = model_selection.train_test_split(self.feature_matrix, self.label_matrix, test_size=int(test_size), random_state=42) return self.correlation_matrix,x_train, x_test,y_train, y_test #数据集 class PCBDataset(Dataset): def __init__(self,data,label): #自己随机产生数据来模拟 self.data=data self.label=label def __len__(self): return len(self.data) def __getitem__(self,index): return self.data[index],self.label[index] ``` ``` datarandgenerator=Data_RandGen() correlation_matrix,x_train, x_test,y_train, y_test=datarandgenerator.data_gen() train_dataset = PCBDataset(x_train, y_train) test_dataset = PCBDataset(x_test, y_test) ``` ## softmax(X,dim) 对于4维的torch数组shape为（0维，1维，2维，3维） ``` import torch import torch.nn as nn x = torch.randn(2,2,2,2) print(x) softmax_output = torch.softmax(x, 0) print("0维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 1) print("1维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 2) print("2维度",softmax_output,softmax_output.shape,sep="\\n") softmax_output = torch.softmax(x, 3) print("3维度",softmax_output,softmax_output.shape,sep="\\n") ``` 输出 ``` tensor([[[[ 1.3436, -0.6011], [-0.0820, 0.2757]], [[-0.1782, -0.8730], [-0.7761, -0.2443]]], [[[ 0.8724, -0.6155], [ 0.4941, -0.6893]], [[ 0.0416, -1.2847], [-0.2367, -2.0729]]]]) 0维度 tensor([[[[0.6157, 0.5036], [0.3598, 0.7241]], [[0.4453, 0.6015], [0.3683, 0.8616]]], [[[0.3843, 0.4964], [0.6402, 0.2759]], [[0.5547, 0.3985], [0.6317, 0.1384]]]]) torch.Size([2, 2, 2, 2]) 1维度 tensor([[[[0.8208, 0.5676], [0.6669, 0.6272]], [[0.1792, 0.4324], [0.3331, 0.3728]]], [[[0.6965, 0.6613], [0.6750, 0.7996]], [[0.3035, 0.3387], [0.3250, 0.2004]]]]) torch.Size([2, 2, 2, 2]) 2维度 tensor([[[[0.8062, 0.2938], [0.1938, 0.7062]], [[0.6452, 0.3478], [0.3548, 0.6522]]], [[[0.5935, 0.5185], [0.4065, 0.4815]], [[0.5691, 0.6874], [0.4309, 0.3126]]]]) torch.Size([2, 2, 2, 2]) 3维度 tensor([[[[0.8749, 0.1251], [0.4115, 0.5885]], [[0.6670, 0.3330], [0.3701, 0.6299]]], [[[0.8158, 0.1842], [0.7656, 0.2344]], [[0.7902, 0.2098], [0.8625, 0.1375]]]]) torch.Size([2, 2, 2, 2]) ``` ## masked_select(X,X ) 掩码取值 ``` import torch a = torch.tensor([1,2,3,4,5]) print(a<4) print(torch.lt(a,4)) #lt gt eq le ge print(a[a<4]) print(torch.masked_select(a, a<4)) print(torch.nonzero(a<4)) ``` 输出 ``` tensor([ True, True, True, False, False]) tensor([ True, True, True, False, False]) tensor([1, 2, 3]) tensor([1, 2, 3]) tensor([[0], [1], [2]]) ``` ## nonzero(X) 取非0元素的索引 ## dist(X,X) ``` torch.dist(word, w) 计算词 word 和词向量 w 之间的欧几里得距离。 ``` ## index_select(X) 可以根据给定的索引，从一个张量中选择指定维度上的特定元素。 (0维，1维，...) ``` torch.index_select(input, dim, index) ``` 示例1 torch矩阵选择第[0,2,1,3,2,2]行，并进行堆叠 ``` import torch # 创建一个 4x3 的张量 tensor = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) index=torch.tensor([0,2,1,3,2,2]) selected_tensor=torch.index_select(tensor,dim=0,index=index) print(selected_tensor) ``` 输出 ``` tensor([[ 1, 2, 3], [ 7, 8, 9], [ 4, 5, 6], [10, 11, 12], [ 7, 8, 9], [ 7, 8, 9]]) ``` 示例2对象方法调用 ``` import torch # 创建一个 4x3 的张量 tensor = torch.tensor([[1, 2, 3], [4, 5, 6], [7, 8, 9], [10, 11, 12]]) index=torch.tensor([0,2,1,3,2,2]) selected_tensor=tensor.index_select(dim=0,index=index) print(selected_tensor) ``` 输出与上方一致 ## device() ``` device = torch.device(\'cuda\') ``` # torchvision ## transforms ### Compose([X,X,X]) 用于组合多个图像转换操作。其目的是将多个转换步骤按顺序应用到图像上，从而一次性完成多个预处理操作。 定义： ``` self.__image_transform = transforms.Compose([ transforms.ToTensor(), transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) ]) ``` 使用： ``` img_data = self.__image_transform(img) ``` ### ToTensor() 这个转换操作将输入的图像从 PIL 图像或 NumPy 数组转换为 PyTorch 的张量（tensor）。转换后的张量会有以下特点： 1. 图像的像素值会被标准化到 [0, 1] 的范围。 对于彩色图像，转换后的形状是 (C, H, W)，其中 C 是颜色通道数（如 RGB 为 3），H 是图像高度，W 是图像宽度 。 ``` image = transforms.ToTensor()(pimg.open(r"testpic1.jpg")) ``` ``` from PIL import Image import torch import torchvision.transforms as transforms # 打开图像 img = Image.open(r"testpic1.jpg") # 将图像转换为张量 transform = transforms.ToTensor() img_tensor = transform(img) # 现在 img_tensor 是一个 PyTorch 张量 print(img_tensor.shape) # 打印张量形状，通常是 (C, H, W) ``` ### Normalize(mean, std) ``` transforms.Normalize(mean, std) ``` 每个通道的每个像素值减去对应的均值 mean，并除以对应的标准差 std。 这有助于让模型对不同图像的亮度和对比度的变化更加鲁棒，通常是为了加速训练和提高模型性能。 处理一个 RGB 图像，并且希望对其进行标准化，使得每个通道的像素值具有指定的均值和标准差 ``` import torch from torchvision import transforms from PIL import Image # 加载图像 image = Image.open(\'example_image.jpg\') # 定义标准化的转换操作 transform = transforms.Compose([ transforms.ToTensor(), # 转换图像为 Tensor transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]) # 标准化 ]) # 对图像应用转换 normalized_image = transform(image) # 输出标准化后的图像数据 print(normalized_image) ``` # torchaudio ## load(X) ``` import torchaudio #读入语音 filename=r"0_0_0_0_1_1_1_1.wav" waveform,sample_rate=torchaudio.load(filename) print(waveform,"\\n",sample_rate) ``` 输出 ``` tensor([[ 3.0518e-05, 6.1035e-05, 3.0518e-05, ..., -1.8616e-03, -2.2583e-03, -1.3733e-03]]) 8000 ``` # tqdm ``` pip install tqdm ``` ## tqdm 添加进度条 原始： ``` # for i, (img_data_, category_, offset_) in enumerate(train_dataloader): ``` ``` for i, (img_data_, category_, offset_) in enumerate(tqdm(validate_dataloader, desc="验证数据加载", unit="批次")): ``` 完整使用方法 ``` #tqdm from tqdm import tqdm iters=100 processbar=tqdm(range(iters),desc="Adam优化",unit="批次") for iter in processbar: loss=torch.randn(1) f_vals=torch.randn(1) # 损失显示 processbar.set_postfix(loss=loss.item(),val=f_vals.item()) ``` 输出 Adam优化: 100%|██████████| 100/100 [00:00<00:00, 2195.74批次/s, loss=-0.925, val=0.73] # math ## modf(X) # sklearn ``` pip install scikit-learn ``` # PIL ## Image ``` from PIL import Image ``` ### open(X) 打开图像并读取图像的大小 ``` Image.open(image_file) ``` ``` with Image.open(image_file) as img: img_w, img_h = img.size ``` ### fromarray(X,X) ``` PIL.Image.fromarray(obj, mode=None) ``` - **`obj`**：这是一个 `numpy` 数组，通常是一个多维数组，表示图像的数据。 - 对于灰度图像，数组的形状通常是 `(height, width)`，即二维数组。 - 对于 RGB 图像，数组的形状通常是 `(height, width, 3)`，表示每个像素有 3 个通道（红色、绿色和蓝色）。 - 对于 RGBA 图像，数组的形状通常是 `(height, width, 4)`，表示每个像素有 4 个通道（红色、绿色、蓝色和透明度通道）。 - **`mode`**：这是一个可选的参数，用于指定输出图像的模式。常见的图像模式包括： - `\'1\'`：1 位像素（黑白图像） - `\'L\'`：8 位像素，灰度图（每个像素是一个 0-255 之间的灰度值） - `\'RGB\'`：每个像素由红色、绿色和蓝色三种颜色通道组成 - `\'RGBA\'`：每个像素由红色、绿色、蓝色和透明度四个通道组成 - `\'CMYK\'`：每个像素由青色、品红色、黄色和黑色四个通道组成 示例 ``` import numpy as np from PIL import Image # 创建一个 100x100 的 RGB 图像（随机的红、绿、蓝通道值） array = np.random.randint(0, 256, (100, 100, 3), dtype=np.uint8) # 从 NumPy 数组创建 RGB 图像 img = Image.fromarray(array, mode=\'RGB\') # 显示图像 img.show() # 保存图像 img.save("rgb_image.png") ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250211215519335.png" alt="image-20250211215519335" style="zoom: 25%;" /> 原始格式不匹配的使用astype(\'uint8\')转换 ``` img = Image.fromarray(res.astype(\'uint8\'), mode=\'RGBA\') ``` ### new(X,X,X) 用于创建一张新的图像。这个方法可以用来生成空白的图像，也可以用来创建一个特定颜色的背景图像。 ``` PIL.Image.new(mode, size, color=0) ``` 1. **mode**：图像的色彩模式，定义了图像每个像素的颜色数据的结构。常见的模式有： - `\'1\'`：1位像素（黑白二值图像） - `\'L\'`：8位像素（灰度图像） - `\'RGB\'`：24位像素（红、绿、蓝三色通道的彩色图像） - `\'RGBA\'`：32位像素（包括红、绿、蓝通道和透明度通道） - `\'CMYK\'`：每个像素有四个通道：青色（Cyan）、洋红色（Magenta）、黄色（Yellow）、黑色（Key） - `\'P\'`：调色板模式（用于每个像素用一个索引表示色彩） - `\'I\'`：32位整型像素 - `\'F\'`：32位浮动小数型像素 2. **size**：图像的大小，通常是一个元组 `(width, height)`，表示图像的宽度和高度。 3. **color**：可选，填充颜色。如果你创建的图像是空白的，或者你希望用特定颜色填充整个图像，这个参数就很有用。它的默认值为 `0`（黑色）。对于 `\'RGB\'` 模式，`color` 参数通常是一个元组，表示 RGB 颜色值，如 `(255, 255, 255)` 表示白色；对于 `\'L\'` 模式，`color` 是一个灰度值（例如 `128` 表示灰色）。 示例 ``` from PIL import Image # 创建一个 200x200 的黑色背景图像 img = Image.new("RGB", (200, 200), (0, 0, 0)) img.show() # 显示图像 ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250212003440182.png" alt="image-20250212003440182" style="zoom:25%;" /> 示例2 ``` from PIL import Image # 创建一个 150x150 的半透明背景图像（RGBA模式） img = Image.new("RGBA", (150, 150), (255, 0, 0, 128)) # 红色半透明 img.show() # 显示图像 ``` 输出 <img src="/docs/python语法/代码语法_localdata/image-20250212003503036.png" alt="image-20250212003503036" style="zoom: 33%;" /> ### 返回值： - 返回一个新的 `Image` 对象，表示创建的图像。 ### 类方法 #### X.size 获取图片长宽 ``` w1, h1 = img.size ``` #### crop(X) 图像裁剪，X是一个包含四个元素的元组 `(left, upper, right, lower)`，定义了裁剪区域 ``` img.crop(crop_box) ``` ``` from PIL import Image img = Image.open("image.jpg") crop_box = (100, 100, 400, 400) # 裁剪区域的左、上、右、下坐标 face_crop = img.crop(crop_box) face_crop.show() # 显示裁剪后的图像 ``` #### resize(X) ``` resized =Image.resize(size, resample=0) ``` size：一个包含两个整数的元组 (width, height)，表示目标图像的宽度和高度。 resample：可选参数，指定调整大小时使用的重采样算法。常用的值包括： Image.NEAREST：最邻近算法（最快，但图像可能不平滑）。 Image.BILINEAR：双线性插值（更平滑的效果）。 Image.BICUBIC：立方插值（效果最好，但计算量较大）。 Image.LANCZOS：高质量下采样。 #### X.show(X) 显示图片 #### X.save(X) 保存图片 #### X.thumbnail(X) 用于修改图像的大小，同时保持其纵横比。这个方法会原地修改图像（即改变原图），并不会返回一个新的图像对象 - **(width, height)**：一个元组，指定缩略图的最大宽度和高度。图像会根据这个尺寸进行缩放，同时保持原始图像的纵横比。如果图像的宽高比不同于提供的宽高比，图像的缩略图会在保证宽度或高度不超过限制的情况下进行缩放，另外一个维度会自适应。 示例 ``` from PIL import Image # 打开图像 image = Image.open(\'1.jpg\') # 设置最大宽度和高度 max_size = (150, 150) # 创建缩略图 image.thumbnail(max_size) print(np.array(image).shape) # 保存为新的文件 image.save(\'example_thumbnail.jpg\') ``` 输出 ``` (123, 150, 3) ``` # sum() 可对单层列表求和，返回1个数，否则报错 # time ## 类方法 ### time() 使用time计算一段代码的执行时间 粗计时 ``` import time # 记录开始时间 start_time = time.time() # 需要测量执行时间的代码 for i in range(1000000): pass # 示例代码：循环一百万次 # 记录结束时间 end_time = time.time() # 计算执行时间 execution_time = end_time - start_time print(f"代码执行时间: {execution_time} 秒") ``` 精计时 ``` import time # 记录开始时间 start_time = time.perf_counter() # 需要测量执行时间的代码 for i in range(1000000): pass # 示例代码：循环一百万次 # 记录结束时间 end_time = time.perf_counter() # 计算执行时间 execution_time = end_time - start_time print(f"代码执行时间: {execution_time} 秒") ``` # random ``` import random ``` ## random.uniform(X) 返回的值是区间 `[a, b]` 中的一个随机浮点数 ``` random.uniform(a, b) ``` ## random.choice(X) 从列表中随机选择一个元素 ``` my_list = [1, 2, 3, 4, 5] random_element = random.choice(my_list) print(random_element) # 输出：1，2，3，4，或5（随机） ``` 从字符串中随机选择一个字符 ``` my_string = "hello" random_char = random.choice(my_string) print(random_char) # 输出：\'h\'，\'e\'，\'l\'，\'o\' 中的一个字符 ``` ## random.randint 生成一个 1 到 10 之间的随机整数 ``` random_int = random.randint(1, 10) print(random_int) # 输出：1，2，3，4，5，6，7，8，9，或10（随机） ``` # cv2 # open() ``` file = open("file_path", "w") ``` ## write() ``` file.write(string) ``` write() 1. 仅接受一个字符串作为参数 2. 不会自动添加换行符。如果你需要换行，需要手动添加 \\n ``` positive_anno_file.write("Hello, world!\\n") # 写入一行文本并换行 ``` # format() format() 是 Python 中的字符串方法，用于将指定的值插入到字符串中的占位符 {} 中。它可以接收多个参数并按顺序插入到对应的位置。 exp1:f ``` "string {0} and {1}".format(value1, value2) ``` exp2: ``` print("最优自变量{0:.4f},最优目标函数{1:.4f}".format(xOpt,objf(xOpt))) ``` # os ## path ### exists(X) ``` if os.path.exists("X"): pass ``` ## makedirs(X) ``` os.makedirs("./param") ``` # tensorflow ## V1 ``` pip uninstall tensorflow pip install tensorflow==1.15 -i https://pypi.tuna.tsinghua.edu.cn/simple ``` ### placeholder(X) ### Variable(X) ### global_variables_initializer(X) ### 类方法 ## V2 # torchtext ``` pip install torchtext -i https://pypi.tuna.tsinghua.edu.cn/simple ``` ``` import torchtext ``` ## vocab ### GloVe(X) 建立词表 ``` gv = torchtext.vocab.GloVe(name="6B", dim=50) ``` - `torchtext.vocab.GloVe` 是用于加载 GloVe 预训练词向量的函数。 - `name="6B"` 表示加载 "GloVe 6B" 预训练模型。这个模型是基于 6 亿词的语料库进行训练的。 - `dim=50` 表示每个词的词向量将被表示为 50 维的向量。 #### 类方法 #### 类变量 #### stoi 根据word获取索引 `gv.stoi[word]` 是将词 `word` 转换为它在词汇表中的索引。 ##### vectors 该函数返回给定词 `word` 的词向量，是一个矩阵，每一行对应一个词的词向量 ``` def get_wv(word): return gv.vectors[gv.stoi[word]] ``` - `gv.stoi[word]` 是将词 `word` 转换为它在词汇表中的索引。 - `gv.vectors` 是一个矩阵，每一行对应一个词的词向量。`gv.vectors[gv.stoi[word]]` 获取该词的词向量。 - 该函数返回给定词 `word` 的词向量。 ##### itos 根据索引 `i` 获取词汇表中的词。 ``` gv.itos[i] ``` ## dist # moviepy ``` pip install moviepy ``` ## > 报错ModuleNotFoundError: No module named \'moviepy.editor\' > > 改为 > > ``` > from moviepy import VideoFileClip, AudioFileClip > ``` # argparse 使用双引号 ``` #参数 import argparse parser=argparse.ArgumentParser(description="SGCN_Module") #训练参数 parser.add_argument("--epochs",default=300,type=int,metavar="N",help="迭代次数")#迭代次数 parser.add_argument("--outputdict", default={}, type=dict,metavar="N",help="输出数据") #模型参数 parser.add_argument("--num_nodes", default={}, type=dict,metavar="N",help="节点个数") parser.add_argument("--in_channels", default={}, type=dict,metavar="N",help="节点特征数") parser.add_argument("--batch_size", default=5, type=int,metavar="N",help="批大小") parser.add_argument("--timesteps", default={}, type=dict,metavar="N",help="输入时间序列长度") parser.add_argument("--predictsteps", default={}, type=dict,metavar="N",help="输出数据") args = parser.parse_args() if __name__=="__main__": # 打印解析后的参数 print("Epochs:", args.epochs) print("Output dict:", args.outputdict) print("Number of nodes:", args.num_nodes) print("Input channels:", args.in_channels) print("Batch size:", args.batch_size) print("Timesteps:", args.timesteps) print("Predict steps:", args.predictsteps) ``` # 环境 工作文件夹 安装torch、cuda、cudnn、cudatoolkit ``` activate aiclass_torch_3p11 ``` 不破坏安装 ``` pip install torchaudio --no-deps ``` > import cv2 > ModuleNotFoundError: No module named \'cv2\' > > ``` > pip install opencv-python > ``` > 查看cuda能否使用 > > ``` > import torch > > # 检查是否有可用的 CUDA 设备 > print(torch.cuda.is_available()) > > # 输出当前 CUDA 设备的信息 > if torch.cuda.is_available(): > print(f"CUDA Device Name: {torch.cuda.get_device_name(0)}") > print(f"CUDA Device Memory: {torch.cuda.get_device_properties(0).total_memory}") > else: > print("CUDA is not available.") > ``` > conda新建环境安装路径修改 > > ``` > envs_dirs: > - D://Anaconda//envs > ``` > CondaValueError: You have chosen a non-default solver backend (libmamba) but it was not recognized. Choose one of: classic > > ``` > conda config --set solver classic > ``` **** ')])],-1)])),_:1,__:[41]})]),_:1})])}const Y=c(x,[["render",P]]);export{O as __pageData,Y as default};
